<div class="container-fluid">
  <div class="width_change" id="row block-tilte">
    <div class="col-xs-offset-2">
      <div class="bs-callout bs-callout-danger">
        <h5>微信支付管理</h5>
      </div>
      <div class="bs-callout">
        <a ng-click="filterByStatus('all');" ng-class="{'btn-info': pay_status == 'all'}" class="btn">全部&nbsp<span class="badge">{{total.count_all.total}}</span></a>
        <a ng-click="filterByStatus('0');" ng-class="{'btn-info': pay_status == '0'}" class="btn">未支付&nbsp<span class="badge">{{total.count_waitting.total}}</span></a>
        <a ng-click="filterByStatus('1');" ng-class="{'btn-info': pay_status == '1'}" class="btn">已支付&nbsp<span class="badge">{{total.count_success.total}}</span></a>
        <a ng-click="filterByStatus('-1');" ng-class="{'btn-info': pay_status == '-1'}" class="btn">支付失败&nbsp<span class="badge">{{total.count_failed.total}}</span></a>
        <a class="btn btn-primary pull-right" href="{{payExportUrl}}" target="_blank">微信对账单导出</a>
        <div class="block mt-10 ml-default">
          <form class="form-inline" role="form">
            <!--
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-addon">所属系统</div>
                <select class="form-control" ng-model="site" ng-options="m.name for m in siteList">
                  <option value="">请选择系统</option>
                </select>
              </div>
            </div>
            -->
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-addon">城市</div>
                <select class="form-control" ng-model="city" ng-options="m.name for m in cityList">
                  <option value="">请选择城市</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-addon">关键词</div>
                <input type="text" ng-model="searchValue" class="form-control" placeholder="请输入搜索关键词" />
              </div>
            </div>
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-addon">送货起始时间</div>
                <input type="text" is-open="opened"  datepicker-popup="yyyy-MM-dd" ng-click="open($event)" datepicker-options="dateOptions"  class="form-control" ng-model="startTime"  id="startTime" placeholder="点击获取时间">
              </div>
            </div>
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-addon">送货截止时间</div>
                <input type="text" ng-model="endTime" class="form-control" datepicker-popup="yyyy-MM-dd" datepicker-options="endDateOptions"  ng-click="endOpen($event)" is-open="endOpened" id="endTime" placeholder="点击获取时间">
              </div>
            </div>
            <div class="form-group">
              <button class="btn-block btn btn-info" ng-click="search();">筛选</button>
            </div>
            <div class="form-group">
              <button class="btn btn-block btn-warning" ng-click="reset()">重置</button>
            </div>
          </form>
          <div class="table-responsive" style="margin-top:10px;">
            <table class="table table-bordered table-striped table-hover">
              <thead>
                <tr>
                  <td class="text-center"><h5>内部编号</h5></td>
                  <td class="text-center"><h5>交易时间</h5></td>
                  <td class="text-center"><h5>客户姓名</h5></td>
                  <td class="text-center"><h5>客户电话</h5></td>
                  <td class="text-center"><h5>店铺名称</h5></td>
                  <td class="text-center"><h5>支付方式/状态</h5></td>
                  <td class="text-center"><h5>送货时间</h5></td>
                  <td class="text-center"><h5>订单金额</h5></td>
                  <td class="text-center"><h5>支付金额</h5></td>
                  <td class="text-center"><h5>订单状态</h5></td>
                  <td class="text-center"><h5>订单内容</h5></td>
                </tr>
              </thead>
              <tbody ng-if="list.length>0">
                <tr ng-repeat="item in list">
                  <td class="text-center"><h5>{{item.id}}</h5></td>
                  <td class="text-center"><h5>{{item.created_time}}</h5></td>
                  <td class="text-center"><h5>{{item.user_info.name}}</h5></td>
                  <td class="text-center"><h5>{{item.user_info.mobile}}</h5></td>
                  <td class="text-center"><h5>{{item.user_info.shop_name}}</h5></td>
                  <td class="text-center"><h5>{{item.pay_type.msg}}<h5 class="label {{item.pay_status.class}}">{{item.pay_status.msg}}</h5></h5></td>
                  <td class="text-center"><h5>{{item.deliver_date}}</h5><h5>{{item.deliver_time.msg}}</h5></td>
                  <td class="text-center"><h5>{{item.total_price}}</h5><h5 class ="label label-danger" ng-if="item.pay_reduce > 0">支付减免{{item.pay_reduce}}元</h5></td>
                  <td class="text-center"><h5>{{item.pay_price}}</h5></td>
                  <td class="text-center"><h5 class="label {{item.order_status.class}}" >{{item.order_status.msg}}</h5></td>
                  <td class="text-center"><h5><a ng-click="getpage()" ng-href="order/detail/{{item.order_number}}">查看</a></h5></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <nav>
        <dachu-pagination conf="paginationConf"></dachu-pagination>
      </nav>
    </div>
  </div>
</div>
