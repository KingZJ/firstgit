<div class="container-fluid">
  <div class="width_change" id="row block-title">
    <div class="col-sm-offset-2 col-sm-10 col-xs-12">
      <div class="bs-callout bs-callout-danger">
        <h5>新投诉单填写</h5>
      </div>
      <div class="form-group" ng-show="basic_form.$invalid && basic_form.$dirty && show_error">
        <div class="col-sm-12">
          <div class="alert alert-danger">
            <ul>
              <li ng-show="basic_form.source.$error.required">请选择投诉来源！</li>
              <li ng-show="basic_form.feedback.$error.required">请选择反馈人！</li>
              <li ng-show="basic_form.ctype.$error.required">请选择投诉单类型！</li>
              <li ng-show="basic_form.description.$error.required">请输入问题描述！</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="block mt-10 ml-default">
        <form class="form-horizontal showcase-form" role="form" name="basic_form" id="basic_form">
          <div class="form-group">
            <label class="col-sm-2 control-label">运营组受理人：</label>
            <div class="col-sm-10">
              <input type="text" name="cur_name" ng-model="data.cur_name" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">所属系统：</label>
            <div class="col-sm-10">
              <input type="text" name="site_name" ng-model="data.site_name" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">地区：</label>
            <div class="col-sm-10">
              <input type="text" name="city_name" ng-model="data.city_name" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">线路：</label>
            <div class="col-sm-10">
              <input type="text" name="line" ng-model="data.line" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">订单号：</label>
            <div class="col-sm-10">
              <input type="text" name="order_number" ng-model="data.order_number" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">所属销售：</label>
            <div class="col-sm-10">
              <input type="text" name="invite_name" ng-model="data.sale.name" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">店铺名称：</label>
            <div class="col-sm-10">
              <input type="text" name="shop_name" ng-model="data.shop_name" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">客户姓名：</label>
            <div class="col-sm-10">
              <input type="text" name="realname" ng-model="data.realname" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">客户电话：</label>
            <div class="col-sm-10">
              <input type="text" name="mobile" ng-model="data.mobile" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">客户地址：</label>
            <div class="col-sm-10">
              <input type="text" name="address" ng-model="data.address" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">送货日期：</label>
            <div class="col-sm-10">
              <input type="text" name="deliver_date" ng-model="data.deliver_date" class="form-control" placeholder="" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">投诉来源：</label>
            <div class="col-sm-10">
              <select name="source" ng-model="data.source" class="form-control"
                ng-options="m.msg for m in sourceList" required>
                <option value="">
                请选择投诉来源
                </option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">反馈人：</label>
            <div class="col-sm-10">
              <select name="feedtype" ng-model="data.feedback" class="form-control"
                ng-options="m.msg for m in feedbackList" required>
                <option value="">
                请选择反馈人
                </option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">投诉单类型：</label>
            <div class="col-sm-10">
              <select name="ctype" ng-model="data.ctype" class="form-control"
                ng-options="m.msg for m in ctypeList" required>
                <option value="">
                请选择投诉单类型
                </option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">投诉单内容：</label>
            <div class="col-sm-10">
              <div ng-repeat="item in contents">
                <select name="product" ng-model="item.product" class=""
                  ng-options="m.name for m in data.detail"  ng-change="changeProduct($index);" required>
                  <option value="">
                  请选择投诉单内容
                  </option>
                </select>
                <button type="button" class="btn btn-success" ng-click="addContent();" ng-if="$index == 0">
                  <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 增加
                </button>
                <button type="button" class="btn btn-danger" ng-click="removeContent($index);" ng-if="$index > 0">
                  <span class="glyphicon glyphicon-minus" aria-hidden="true"></span> 删除
                </button>
                <input type="text" name="price" ng-model="item.product.single_price" class="" placeholder="" style="width:100px;" ng-change="calcProduct(item);"/>
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                <input type="number" name="quantity" ng-model="item.quantity" class="" placeholder="" style="width:100px;" ng-focus="clearNum(item)" ng-blur="setNum(item,true)" ng-change="setNum(item)"/> =
                <input type="text" name="sumPrice" ng-model="item.sumPrice" class="" placeholder="" style="width:100px;" readonly/>
              </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">总计金额：</label>
            <div class="col-sm-10">
              <input type="text" name="totalPrice" ng-model="totalPrice" class="form-control" placeholder="总金额" readonly>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">问题描述：</label>
            <div class="col-sm-10">
              <input type="text" name="description" ng-model="data.description" class="form-control" placeholder="请输入问题描述" required>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">相关图片：</label>
            <!--上传图片-->
            <span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}">
              <i class="glyphicon glyphicon-plus"></i>
              <span class="button"  ng-file-select ng-model="files">
                上传图片
              </span>
            </span>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">已上传图片列表：</label>
            <div class="col-sm-2 col-md-2" ng-repeat="files in imgUploads">
              <div class="thumbnail">
                <img width="100" ng-show="files.dataUrl != null" ng-src="{{files.dataUrl}}" class="thumbnail" />
                <div class="caption text-center">
                  <p><a href="#" class="btn btn-primary" role="button" ng-click="picCancel($index)">删除</a></p>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">处理意见：</label>
            <div class="col-sm-10">
              <input type="text" name="suggest" ng-model="data.suggest" class="form-control" placeholder="请输入处理意见">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">问题进度1：</label>
            <div class="col-sm-10">
              <input type="text" name="progress1" ng-model="data.progress1" class="form-control" placeholder="请输入问题进度1">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">销售/品控受理人：</label>
            <div class="col-sm-10">
              <select name="sale" ng-model="data.sale" class="form-control"
                ng-options="m.name for m in saleList">
                <option value="">
                请选择销售/品控受理人
                </option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">问题进度2：</label>
            <div class="col-sm-10">
              <input type="text" name="progress2" ng-model="data.progress2" class="form-control" placeholder="请输入问题进度2">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">物流组受理人：</label>
            <div class="col-sm-10">
              <select name="logistics" ng-model="data.logistics" class="form-control"
                ng-options="m.name for m in logisticsList">
                <option value="">
                请选择物流组受理人
                </option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">问题进度3：</label>
            <div class="col-sm-10">
              <input type="text" name="progress3" ng-model="data.progress3" class="form-control" placeholder="请输入问题进度3">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">处理结果：</label>
            <div class="col-sm-10">
              <input type="text" name="solution" ng-model="data.solution" class="form-control" placeholder="请输入处理结果">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">处理状态：</label>
            <div class="col-sm-10">
              <select name="status" ng-model="data.status" class="form-control"
                ng-options="m.msg for m in statusList">
              </select>
            </div>
          </div>
          <div class="form-group">
            <button class="btn btn-info btn-lg col-sm-3 col-sm-offset-1" ng-click="create();"> 提交</button>
            <button class="btn btn-warning btn-lg col-sm-3 col-sm-offset-1" ng-click="back();">取消</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
