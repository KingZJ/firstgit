"use strict";angular.module("hop",["angularFileUpload","ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap","dachu.widget"]),angular.module("hop").controller("LoginCtrl",["$scope","req","$location","$cookieStore",function(t,e,s,a){t.user={mobile:"",password:""},t.message={text:"",status:""},t.login=function(){if(t.loginForm.$invalid)return t.loginForm.submitted=!0,!1;var s=function(s){return 0!==parseInt(s.status)?(t.error={cls:"alert alert-danger",msg:s.msg},!1):(a.put("type",s.info.type),a.put("id",s.info.id),localStorage.setItem("access",s.access),e.redirect(e.refer),void 0)};e.getdata("user/login","POST",s,t.user)}}]),angular.module("hop").controller("UserListCtrl",["$location","dialog","req","$scope",function(t,e,s,a){a.dateOptions={formatYear:"yy",startingDay:1},a.endDateOptions={formatYear:"yy",startingDay:1},a.endOpened=a.opened=!1,a.open=function(t){t.preventDefault(),t.stopPropagation(),a.opened=!0},a.endOpen=function(t){t.preventDefault(),t.stopPropagation(),a.endOpened=!0};var l=function(){s.getdata("user/role_list","POST",function(t){0==t.status&&(a.role_list=t.role_list)})},o=function(){var t=a.role?a.role.id:0,e={roleId:t,searchValue:a.searchValue,startTime:Date.parse(a.startTime),endTime:Date.parse(a.endTime),currentPage:a.paginationConf.currentPage,itemsPerPage:a.paginationConf.itemsPerPage};s.getdata("user/lists","POST",function(t){0==t.status&&(a.paginationConf.totalItems=t.total,a.list=t.list)},e)};a.paginationConf={currentPage:1,itemsPerPage:15},a.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",o),a.search=function(){o()},a.reset=function(){a.searchValue="",a.startTime="",a.endTime="",o()},a.setStatus=function(t,l){var o="禁用";1==l&&(o="启用"),e.tips({actionText:"确定",bodyText:"确定"+o+"["+a.list[t].name+"]账号吗?",ok:function(){s.getdata("user/toggle_status","POST",function(s){0==s.status?(e.tips({bodyText:"操作成功！"}),a.list[t].status=l):e.tips({bodyText:"操作失败！"})},{uid:a.list[t].id,status:l})}})},a.resetPassword=function(t){e.tips({actionText:"确定",bodyText:"确定重置用户["+a.list[t].name+"]的密码吗?",ok:function(){s.getdata("user/reset_password","POST",function(t){e.tips(0==t.status?{bodyText:"密码重置成功！"}:{bodyText:"密码重置失败！"})},{uid:a.list[t].id})}})},a.delete=function(t){e.tips({actionText:"确定",bodyText:"确定删除用户["+a.list[t].name+"]吗?",ok:function(){s.getdata("user/delete","POST",function(t){0==t.status?(e.tips({bodyText:"删除成功！"}),o()):e.tips({bodyText:"删除失败！"+t.msg})},{id:a.list[t].id})}})};var n=function(){var e=t.$$host,s="http://api.dachuwang.com/";0!==e.indexOf("hop.dachuwang.com")&&(s="http://api.dachuwang.net/");var l=s+"hop/user/export_data?1=1";a.role&&(l+="&userType="+a.role.id),a.status&&(l+="&status="+a.status),a.key&&(l+="&key="+a.key),a.startTime&&(l+="&startTime="+Date.parse(a.startTime)),a.endTime&&(l+="&endTime="+Date.parse(a.endTime)),window.open(l)};a.exportData=function(){e.tips({headerText:"导出数据",actionText:"确定",bodyText:"确定导出数据吗?",ok:function(){n()}})},l()}]),angular.module("hop").controller("UserEditCtrl",["$location","dialog","req","$scope","$stateParams",function(t,e,s,a,l){var o=function(){a.id=l.id;var t={id:a.id};s.getdata("user/edit_input","POST",function(t){0==t.status&&(a.data=t.info,a.dept_list=t.dept_list,a.role_list=t.role_list,a.province_list=t.province_list,angular.forEach(a.dept_list,function(e){e.id==t.info.dept_id&&(a.data.dept=e)}),angular.forEach(a.role_list,function(e){e.id==t.info.role_id&&(a.data.role=e)}),angular.forEach(a.province_list,function(e){e.id==t.info.province_id&&(a.data.province=e)}))},t)};a.edit=function(){if(a.show_error=!0,a.basic_form.$setDirty(),!a.basic_form.$invalid){var t={id:a.data.id,deptId:a.data.dept.id,roleId:a.data.role.id,name:a.data.name,mobile:a.data.mobile,provinceId:a.data.province.id,address:a.data.address};s.getdata("/user/edit","POST",function(t){0==t.status?(e.tips({bodyText:"修改用户成功！"}),s.redirect("/user/list")):e.tips({bodyText:"修改用户失败。"})},t)}},o()}]),angular.module("hop").controller("UserCreateCtrl",["$location","dialog","req","$scope","$stateParams",function(t,e,s,a){var l=function(){s.getdata("/user/create_input","POST",function(t){0==t.status&&(a.dept_list=t.dept_list,a.role_list=t.role_list,a.province_list=t.province_list)})};a.create=function(){if(a.show_error=!0,a.basic_form.$setDirty(),!a.basic_form.$invalid){var t={deptId:a.data.dept.id,roleId:a.data.role.id,name:a.data.name,mobile:a.data.mobile,provinceId:a.data.province.id,address:a.data.address};s.getdata("/user/create","POST",function(t){0==t.status?(e.tips({bodyText:"添加用户成功！"}),s.redirect("/user/list")):e.tips({bodyText:"添加用户失败。"})},t)}},l()}]),angular.module("hop").controller("SubjectAddCtrl",["$scope","req","$upload","daChuLocal","dialog",function(t,e,s,a,l){t.title="新建专题",t.dateOptions={formatYear:"yy",startingDay:1},t.endDateOptions={formatYear:"yy",startingDay:1},t.endOpened=t.opened=!1,t.open=function(e){e.preventDefault(),e.stopPropagation(),t.opened=!0},t.endOpen=function(e){e.preventDefault(),e.stopPropagation(),t.endOpened=!0},t.initValues={name:"添加",value:"",id:"",icon:"glyphicon-plus",cls:"btn-info",clk:"addProduct"},t.products=[t.initValues],t.addProduct=function(e,s){void 0==s&&(s="");var a={name:"删除",value:s,id:"",icon:"glyphicon-minus",cls:"btn-danger",clk:"remove"};t.products.push(a)},t.remove=function(e){var s=t.products.indexOf(e);t.products.splice(s,1)},t.showProduct=function(s){var a=(t.products.indexOf(s),{locationId:t.location.id,searchVal:s.value});e.getdata("product/manage","POST",function(t){s.products=t.list},a)},t.selectProduct=function(e,s){var a=t.products.indexOf(s);t.products[a].id=e.id,t.products[a].value=e.title+"|"+e.sku_number+"|"+e.price+"/"+e.unit,s.products=""};var o=function(){e.getdata("subject/input_options","GET",function(e){0===parseInt(e.status)&&(t.locationInfo=e.list.locations,t.siteSrcs=e.list.sites,t.site=t.siteSrcs[0],t.location=t.locationInfo[0],t.subjectTypes=e.list.subject_type,t.subjectType=t.subjectTypes[0])})};t.link_url="",o(),t.$watch("detailImg",function(){void 0!=t.files&&t.upload("detailUploads","detailImg")}),t.$watch("files",function(){void 0!=t.files&&t.upload("imgUploads","files")}),t.upload=function(e,l){var o=[];angular.forEach(t[l],function(l){s.upload({url:"http://img.dachuwang.com/upload?bucket=sku",file:l,fileFormDataName:"files[]"}).progress(function(t){var e=parseInt(100*t.loaded/t.total);l.progressPercentage=e}).success(function(s){l.dataUrl=s.files[0].url,l.size+="bytes",o.push(l),t[e]=o,a.set(e,t[e])})})},t.add=function(s){if(s.$invalid||!t.imgUploads)return void l.tips({bodyText:"请填写完整信息！"});var a={pic_url:"",banner_url:"",detail_img:"",site_id:1,location_id:1,products:[],startTime:"",endTime:"",subjectType:"",title:""};a.pic_url=t.imgUploads[0].dataUrl,t.detailUploads&&(a.detail_img=t.detailUploads[0].dataUrl),a.site_id=t.site.id,a.location_id=t.location.id,a.title=t.name,a.startTime=Date.parse(t.startTime)/1e3,a.endTime=Date.parse(t.endTime)/1e3,a.subjectType=t.subjectType.id,angular.forEach(t.products,function(t){parseInt(t.id)>0&&a.products.push(t.id)}),2==a.subjectType&&(a.banner_url=a.pic_url,a.pic_url=""),e.getdata("subject/save","POST",function(t){alert(t.msg),e.redirect("/subject")},a)},t.picCancel=function(e,s){var l="detailUploads";0===parseInt(s)&&(l="imgUploads");var o=t[l].indexOf(e);t[l].splice(o,1),t[l]&&a.set(l,t[l])}}]),angular.module("hop").controller("SubjectCtrl",["$scope","req",function(t,e){t.title="专题列表",t.paginationConf={currentPage:1,itemsPerPage:15},t.status="all";var s=function(){var s={currentPage:t.paginationConf.currentPage,itemsPerPage:t.paginationConf.itemsPerPage,searchVal:t.key,status:t.status};e.getdata("subject/lists","POST",function(e){t.advs=e.list,t.paginationConf.totalItems=e.total},s)};s(),t.search=function(){s()},t.reset=function(){t.key=""},t.filterByStatus=function(e){t.status=e,s()},t.setStatus=function(s,a){e.getdata("subject/set_status","POST",function(e){var l=t.advs.indexOf(s);t.advs[l].status=a,alert(e.msg)},{id:s.id,status:a})}}]),angular.module("hop").controller("storageCtrl",["$rootScope","$filter","$scope","req","dialog","appConfigure","$cookieStore",function(t,e,s,a,l,o,n){s.edit_storage=function(t){t.editing=!0},s.cancel_storage=function(){i()},s.save_storage=function(e){t.is_loading=!0,a.getdata("/stock/update","POST",function(e){t.is_loading=!1,0==e.status&&(s.dialog({bodyText:e.msg}),i())},e)},s.locations=[{name:"sku货号",type:"sku_number"},{name:"仓库id",type:"warehouse_id"}],s.site_url=o.url,s.status="all";var i=function(){var t=n.get("productCookie")||"";s.key=t;var e=0;"undefined"!=typeof s.locate&&(e=parseInt(s.locate.id));var l={currentPage:s.paginationConf.currentPage,itemsPerPage:s.paginationConf.itemsPerPage,searchVal:s.key,searchType:s.location.type,status:s.status};a.getdata("/stock/lists","POST",function(t){s.products=t.list,s.paginationConf.totalItems=t.total_count},l)};s.title="库存管理",s.paginationConf={currentPage:1,itemsPerPage:15},s.search=function(){n.put("productCookie",s.key),i()},s.reset=function(){n.remove("productCookie"),s.key="",i()},s.filterByStatus=function(t){s.status=t,i()},s.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",i),s.dialog=l.tips,s.setstatus=function(t,e,l){s.products[l].status=e,a.getdata("product/set_status","POST",function(){s.dialog(1===parseInt(e)?{bodyText:"商品已设置为有货，将在商城展示。"}:{bodyText:"商品已设置为无货，将不在商城展示。"})},{status:e,id:t})}}]),angular.module("hop").controller("ProductCtrl",["$scope","req","dialog","appConfigure","$cookieStore",function(t,e,s,a,l){t.site_url=a.url,t.status="all";var o=function(){var s=l.get("productCookie")||"";t.key=s;var a=0;"undefined"!=typeof t.locate&&(a=parseInt(t.locate.id));var o={currentPage:t.paginationConf.currentPage,itemsPerPage:t.paginationConf.itemsPerPage,searchVal:t.key,locationId:a,status:t.status};e.getdata("/product/manage","POST",function(e){t.products=e.list,t.locations=e.location,a?angular.forEach(t.locations,function(e){e.id==a&&(t.locate=e)}):t.locate=e.location[0],t.paginationConf.totalItems=e.total},o)};t.title="商品列表",t.paginationConf={currentPage:1,itemsPerPage:15},t.search=function(){l.put("productCookie",t.key),o()},t.reset=function(){l.remove("productCookie"),t.key="",o()},t.filterByStatus=function(e){t.status=e,o()},t.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",o),t.dialog=s.tips,t.setstatus=function(s,a,l){t.products[l].status=a,e.getdata("product/set_status","POST",function(){t.dialog(1===parseInt(a)?{bodyText:"商品已设置为有货，将在商城展示。"}:{bodyText:"商品已设置为无货，将不在商城展示。"})},{status:a,id:s})}}]),angular.module("hop").controller("ProductEditCtrl",["$scope","req","$stateParams","$location","$cookieStore","dialog","daChuLocal","daChuTimer",function(t,e,s,a,l,o){t.productsChild=[];var n=s.productId;t.title="添加货物",t.product={title:"",id:n,skuNumber:"",advWords:"",price:50,marketPrice:80,singlePrice:3,unitName:"",isRound:1,storage:"",buyLimit:0,lineId:[0],visiable:1,closeUnit:"",status:1},t.rounds=[{name:"是",val:1,checked:1},{name:"否",val:0,checked:0}],t.init={unit:"",closeUnit:"",skuNumber:"",isRound:!0,productStatus:""};var i=function(){e.getdata("product/edit","POST",function(e){0===parseInt(e.status)&&(t.product.skuNumber=e.info.sku_number,t.product.title=e.info.title,t.product.status=e.info.status,t.init.unitId=e.info.unit_id,t.init.isRound=parseInt(e.info.is_round)?!0:!1,t.init.closeUnitId=e.info.close_unit,t.product.advWords=e.info.adv_words,t.product.price=e.info.price,t.product.lineId=e.info.line_id.split(","),t.product.visiable=e.info.visiable,t.product.buyLimit=e.info.buy_limit,t.product.storage=e.info.storage,t.product.locationId=e.info.location_id,t.product.marketPrice=e.info.market_price,t.product.singlePrice=e.info.single_price,t.getSkuInfo(1))},{id:n})};i(),t.getSkuInfo=function(s){0==parseInt(s)&&(t.product.skuNumber=""),""!=t.product.skuNumber&&e.getdata("product/get_sku_info","POST",function(e){0===parseInt(e.status)?(t.info=e.info,t.locations=e.location,t.allLines=e.line_options,t.visiables=e.visiable_options,n&&(angular.forEach(e.info.product_status,function(e){e.status==t.product.status&&(t.init.productStatus=e)}),angular.forEach(t.locations,function(e){e.id==t.product.locationId&&(t.init.location=e)}),angular.forEach(t.visiables,function(e){e.id==t.product.visiable&&(t.init.visiable=e)}),angular.forEach(e.info.units,function(e){e.id==t.init.unitId&&(t.init.unit=e),e.id==t.init.closeUnitId&&(t.init.closeUnit=e)}),t.lines=e.line_options[t.init.location.id],angular.forEach(t.lines,function(e){-1!=t.product.lineId.indexOf(e.id)&&(e.checked=!0)})),void 0==t.init.visiable&&(t.init.visiable=t.visiables[0])):o.tips({bodyText:e.msg})},{skuNumber:t.product.skuNumber})},t.selectCity=function(){t.lines=t.allLines[t.init.location.id]},t.add=function(){if(t.product.unitName=t.init.unit.name,t.product.status=t.init.productStatus.status,t.product.closeUnit=t.init.closeUnit.name,t.product.locationId=t.init.location.id,t.product.visiable=t.init.visiable.id,""==t.product.title)return void alert("标题为空");var s=[];2==t.product.visiable?angular.forEach(t.lines,function(t){void 0!=t.checked&&t.checked===!0&&s.push(t.id)}):s=[0],t.product.lineId=s,t.product.isRound=t.init.isRound?1:0,e.getdata("/product/save","POST",function(t){0===parseInt(t.status)?(o.tips({bodyText:"保存成功！"}),e.redirect("/product")):o.tips({bodyText:"保存失败，请稍后重试。"})},t.product)}}]),angular.module("hop").controller("ProductAddCtrl",["$scope","req","$location","$cookieStore","dialog","daChuLocal","daChuTimer",function(t,e,s,a,l){t.productsChild=[],t.title="添加货物",t.product={title:"",skuNumber:"",advWords:"",price:50,marketPrice:80,singlePrice:3,unitName:"",isRound:1,closeUnit:"",storage:-1,lineId:0,visiable:1,buyLimit:0,status:1},t.rounds=[{name:"是",val:1,checked:1},{name:"否",val:0,checked:0}],t.init={unit:"",closeUnit:"",skuNumber:"",isRound:!0,productStatus:""},t.getSkuInfo=function(s){0==parseInt(s)&&(t.init.skuNumber="",t.info=""),""!=t.init.skuNumber&&(t.product.skuNumber=t.init.skuNumber,e.getdata("product/get_sku_info","POST",function(e){0===parseInt(e.status)?(t.info=e.info,t.locations=e.location,t.visiables=e.visiable_options,t.init.location=e.location[0],t.init.visiable=e.visiable_options[0],t.lines=e.line_options[t.init.location.id],t.allLines=e.line_options,t.init.line=t.lines[0],t.init.unit=e.info.units[1],t.init.closeUnit=e.info.units[0],t.init.productStatus=e.info.product_status[1]):l.tips({bodyText:e.msg})},{skuNumber:t.product.skuNumber}))},t.add=function(){t.product.unitName=t.init.unit.name,t.product.closeUnit=t.init.closeUnit.name,t.product.status=t.init.productStatus.status,t.product.locationId=t.init.location.id,t.product.visiable=t.init.visiable.id;var s=[];return 2==t.product.visiable?angular.forEach(t.lines,function(t){void 0!=t.checked&&t.checked===!0&&s.push(t.id)}):s=[0],""==t.product.title?void alert("标题为空"):(t.product.lineId=s,t.product.isRound=t.init.isRound?1:0,void e.getdata("/product/save","POST",function(t){0===parseInt(t.status)?(l.tips({bodyText:"保存成功！"}),e.redirect("/product")):l.tips({bodyText:"保存失败，请稍后重试。"})},t.product))},t.selectCity=function(){t.lines=t.allLines[t.init.location.id]}}]),angular.module("hop").controller("HomeAchieveCtrl",["dialog","req","$scope","$modal","$window","$cookieStore","HopAuth",function(t,e,s){s.data="",e.getdata("hop/summary/index","GET",function(t){0==t.status&&(s.data=t.data)})}]),angular.module("hop").controller("HomeCtrl",["$scope",function(t){t.awesomeThings=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{title:"Angular UI Bootstrap",url:"http://angular-ui.github.io/bootstrap/",description:"Bootstrap components written in pure AngularJS by the AngularUI Team.",logo:"ui-bootstrap.png"},{title:"Stylus",url:"http://learnboost.github.io/stylus/",description:"Stylus is a revolutionary new language, providing an efficient, dynamic, and expressive way to generate CSS. Supporting both an indented syntax and regular CSS style.",logo:"stylus.png"}],angular.forEach(t.awesomeThings,function(t){t.rank=Math.random()})}]),angular.module("hop").controller("AdsPosCtrl",["$scope","req",function(t,e){t.title="广告位列表",t.paginationConf={currentPage:1,itemsPerPage:15},t.status="all";var s=function(){var s={currentPage:t.paginationConf.currentPage,itemsPerPage:t.paginationConf.itemsPerPage,searchVal:t.key,status:t.status};e.getdata("ads_position/lists","POST",function(e){t.positions=e.list,t.paginationConf.totalItems=e.total},s)};s(),t.search=function(){s()},t.reset=function(){t.key=""},t.filterByStatus=function(e){t.status=e,s()},t.setStatus=function(s,a){e.getdata("ads_position/set_status","POST",function(e){var l=t.positions.indexOf(s);t.positions[l].status=a,alert(e.msg)},{id:s.id,status:a})}}]),angular.module("hop").controller("AdsPosCreateCtrl",["$scope","req",function(t,e){t.title="添加广告位";var s=function(){e.getdata("ads_position/input_options","GET",function(e){0===parseInt(e.status)&&(t.options=e.list,t.pos_status=t.options.status[0])})};s(),t.pos={title:"",status:1},t.add=function(){t.pos.status=t.pos_status.value,e.getdata("ads_position/save","POST",function(t){alert(t.msg),e.redirect("/position")},t.pos)}}]),angular.module("hop").controller("AdvCreateCtrl",["$rootScope","$scope","$filter","req","$upload","daChuLocal","dialog",function(t,e,s,a,l,o,n){e.title="添加广告",e.loginStatus=[{status:0,name:"全部用户"},{status:1,name:"登陆用户"},{status:1,show_line:!0,name:"指定线路用户"}],e.getLoginStatus=function(t){e.show_line=t.show_line?!0:!1},e.dateOptions={formatYear:"yy",startingDay:1},e.endDateOptions={formatYear:"yy",startingDay:1},e.endOpened=e.opened=!1,e.open=function(t){t.preventDefault(),t.stopPropagation(),e.opened=!0},e.endOpen=function(t){t.preventDefault(),t.stopPropagation(),e.endOpened=!0};var i=function(){a.getdata("ads/input_options","GET",function(t){0===parseInt(t.status)&&(e.positions=t.list.positions,e.locationInfo=t.list.locations,e.siteSrcs=t.list.sites,e.site=e.siteSrcs[0],e.location=e.locationInfo[0],e.catemap=t.list.catemaps,e.cateMaps=e.catemap[e.site.id][e.location.id],e.advStatus=t.list.adv_status,e.advsStatus=e.advStatus[0],e.line=t.list.line_options,e.line_default=e.line[804])})};e.link_url="",i(),e.getMaps=function(){e.cateMaps=e.catemap[e.site.id][e.location.id],e.line_default=e.line[e.location.id],console.log(e.location.id)},e.$watch("files",function(){void 0!=e.files&&e.upload("imgUploads","files")}),e.upload=function(t,s){var a=[];angular.forEach(e[s],function(s){l.upload({url:"http://img.dachuwang.com/upload?bucket=sku",file:s,fileFormDataName:"files[]"}).progress(function(t){var e=parseInt(100*t.loaded/t.total);s.progressPercentage=e}).success(function(l){s.dataUrl=l.files[0].url,s.size+="bytes",a.push(s),e[t]=a,o.set(t,e[t])})})},e.add=function(s){if(s.$invalid||!e.imgUploads)return void n.tips({bodyText:"请填写完整信息！"});var l={pic_url:"",detail_img:"",site_id:1,location_id:1,title:"",pos_id:"",link_url:"",line_id:[]};l.pic_url=e.imgUploads[0].dataUrl,e.detailUploads&&(l.detail_img=e.detailUploads[0].dataUrl),l.site_id=e.site.id,l.location_id=e.location.id,l.title=e.name,angular.forEach(e.line_default,function(t){t.checked&&l.line_id.push(t.id)}),l.needLogin=e.m.status,l.onlineTime=Date.parse(e.startTime)/1e3,l.offlineTime=Date.parse(e.endTime)/1e3,l.link_url=e.catemap_s?"page.list({cateId:"+e.catemap_s.origin_id+"})":e.link_url,angular.forEach(e.line_default,function(){}),angular.forEach(e.positions,function(t){t.checked&&(l.pos_id+=t.id+",")}),t.is_loading=!0,a.getdata("ads/save","POST",function(e){t.is_loading=!1,alert(e.msg),0==e.status&&a.redirect("/ads")},l)},e.picCancel=function(t,s){var a="detailUploads";0===parseInt(s)&&(a="imgUploads");var l=e[a].indexOf(t);e[a].splice(l,1),e[a]&&o.set(a,e[a])}}]),angular.module("hop").controller("AdsCtrl",["$scope","req",function(t,e){t.title="广告列表",t.paginationConf={currentPage:1,itemsPerPage:15},t.status="all";var s=function(){var s={currentPage:t.paginationConf.currentPage,itemsPerPage:t.paginationConf.itemsPerPage,searchVal:t.key,status:t.status};e.getdata("ads/lists","POST",function(e){t.advs=e.list,t.paginationConf.totalItems=e.total},s)};t.$watch("paginationConf.currentPage + paginationConf.itemsPerPage",s),t.search=function(){s()},t.reset=function(){t.key=""},t.filterByStatus=function(e){t.status=e,s()},t.setStatus=function(s,a){e.getdata("ads/set_status","POST",function(e){var l=t.advs.indexOf(s);t.advs[l].status=a,alert(e.msg)},{id:s.id,status:a})}}]),angular.module("hop").controller("ActivityAddCtrl",["$scope","req","rpc","$upload","daChuLocal",function(t,e,s){t.title="发布运营活动";var a=function(){e.getdata("promotion/input_options","GET",function(e){0===parseInt(e.status)&&(t.siteSrcs=e.list.sites,t.site=e.list.sites[0],t.locationInfo=e.list.locations,t.location=e.list.locations[0],t.type=e.list.types,t.orderTypes=e.list.order_types,t.firstOptions=e.list.first_options,t.isFirst=t.firstOptions[1])})};a(),t.getMaps=function(){},t.dateOptions={formatYear:"yy",startingDay:1},t.endDateOptions={formatYear:"yy",startingDay:1},t.latestOptions={formatYear:"yy",startingDay:1},t.endOpened=t.latestOpened=t.opened=!1,t.open=function(e){e.preventDefault(),e.stopPropagation(),t.opened=!0},t.endOpen=function(e){e.preventDefault(),e.stopPropagation(),t.endOpened=!0},t.latestOpen=function(e){return void 0==t.endTime||void 0==t.startTime?(alert("请先选择活动时间范围"),!1):(e.preventDefault(),e.stopPropagation(),void(t.latestOpened=!0))},t.add=function(){var a={title:"",location_id:1,rule:"",startTime:"",endTime:"",latestDeliverTime:"",site_id:"",categoryNames:"",categoryLimitNum:0};return a.site_id=t.site.id,a.location_id=t.location.id,a.rule=t.rule,a.title=t.name,a.startTime=Date.parse(t.startTime)/1e3,a.endTime=Date.parse(t.endTime)/1e3,a.latestDeliverTime=Date.parse(t.latestDeliverTime)/1e3,a.categoryNames=t.categoryNames?t.categoryNames:"",a.categoryLimitNum=t.categoryLimitNum?t.categoryLimitNum:0,a.ruleType=t.ruleType?t.ruleType.id:0,a.orderType=t.orderType?t.orderType.id:0,a.isFirst=t.isFirst?t.isFirst.id:1,a.title?t.ruleType?t.orderType?void s.load("promotion/save","POST",a).then(function(t){alert(t.msg),e.redirect("/activity")},function(t){alert(t)}):(alert("请选择参与活动的订单类型"),!1):(alert("请选择活动类型"),!1):(alert("请输入活动标题"),!1)}}]),angular.module("hop").controller("ActivityCtrl",["$scope","req",function(t,e){t.title="运营活动列表",t.paginationConf={currentPage:1,itemsPerPage:15},t.status="all";var s=function(){var s={currentPage:t.paginationConf.currentPage,itemsPerPage:t.paginationConf.itemsPerPage,searchVal:t.key,status:t.status};e.getdata("promotion/lists","POST",function(e){t.advs=e.list,t.paginationConf.totalItems=e.total},s)};s(),t.search=function(){s()},t.reset=function(){t.key=""},t.filterByStatus=function(e){t.status=e,s()},t.setStatus=function(s,a){e.getdata("promotion/set_status","POST",function(e){var l=t.advs.indexOf(s);t.advs[l].status=a,alert(e.msg)},{id:s.id,status:a})}}]),angular.module("hop").controller("TopCtrl",["$scope","$cookieStore","$location","HopAuth",function(t,e,s,a){if(t.status={isopen:!1},a.auth(),t.isLogin=a.isLogin,t.title="销售管理系统",t.isLogin){var l=e.get("type");100===parseInt(l)?t.userInfo="超级管理员":10==parseInt(l)?t.userInfo="运营":11===parseInt(l)?t.userInfo="财务":103===parseInt(l)&&(t.userInfo="仓管"),t.toggleDropdown=function(e){e.preventDefault(),e.stopPropagation(),t.status.isopen=!t.status.isopen},t.logout=function(){a.logout()},t.changePwd=function(){a.pwd()}}else s.path("/login")}]),angular.module("hop").controller("SidebarCtrl",["$scope","$location","$cookieStore",function(t,e,s){t.selectedItem=null,t.changeUrl=function(e){t.selectedItem=e};var a=(parseInt(s.get("type")),{name:"商品管理",val:[{name:"商品列表",val:"home.product"},{name:"库存管理",val:"home.storage"}]}),l={name:"广告管理",val:[{name:"广告管理",val:"home.ads"},{name:"广告位管理",val:"home.adsPosition"}]},o={name:"运营活动管理",val:[{name:"促销活动管理",val:"home.activity"},{name:"专题列表",val:"home.subject"}]};t.urls=[a,l,o]}]),angular.module("hop").controller("NavbarCtrl",["$scope","$cookieStore","$location",function(t,e,s){t.currentUrl=s.$$url.split("_")[0],t.status={isopen:!1},t.title="SMS"}]),angular.module("hop").factory("daChuTimer",function(){var t={getNow:function(){return parseInt((new Date).getTime()/1e3)},cacheTime:30};return{getNow:t.getNow,setCacheTime:function(e){t.cacheTime=parseInt(e)},compare:function(e){var s=this.getNow();return parseInt(e)+t.cacheTime>s?!0:!1}}}),angular.module("hop").factory("rpc",["$http","$q","$location","$cookieStore","appConfigure","daChuLocal",function(t,e,s,a,l,o){return{load:function(s,a,n){var i=this,c=e.defer();return void 0==a&&(a="POST"),t({url:l.url+"/"+s+"?r="+Math.random(),method:a,cache:!1,withCredentials:!0,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){t&&-100===t.status?(o.remove("token"),c.reject("您还未登录，请先登录。"),i.redirect("/user/login",i.refer)):t&&0===t.status?c.resolve(t):c.reject(t&&0!==t.status?t.msg:"请求失败，请检查网络。")}).error(function(t){c.reject(t)}),c.promise},init:s,refer:"/",redirect:function(t,e){return void 0!=e?this.refer=e:""==t&&s.path(this.refer),s.path(t),!1}}}]),angular.module("hop").factory("req",["$http","$location","$cookieStore","appConfigure",function(t,e,s,a){var l=(e.$$host,a.url);return{getdata:function(e,a,o,n){void 0==a&&(a="POST");var i=this;t({url:l+"/"+e+"?r="+Math.random(),method:a,cache:!1,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n}).success(function(t){t&&-100===t.status&&(s.remove("id"),s.remove("type"),i.redirect("/user/login")),o(t)})},init:e,refer:"/",redirect:function(t,s){void 0!=s?this.refer=s:""==t&&e.path(this.refer),e.path(t)}}}]),angular.module("hop").factory("pagination",function(){var t={page:1,isProcessing:!1,processingText:"努力加载中...",isDone:!1,more:"点击加载更多",callback:null};return t.nextPage=function(){t.isProcessing||t.isDone||(t.more="正在加载更多...",t.isProcessing=!0,t.page++,t.callback&&t.callback(function(e){e?(t.isDone=!0,t.more="没有更多了"):t.more="点击加载更多",t.isProcessing=!1}))},t.init=function(e){t.page=1,t.isProcessing=!1,t.isDone=!1,t.more="点击加载更多",t.callback=e},t}),angular.module("hop").factory("daChuLocal",function(){var t={get:function(t){return JSON.parse(localStorage.getItem(t))},set:function(t,e){localStorage.setItem(t,JSON.stringify(e))}};return t}),angular.module("hop").factory("dialog",["$modal",function(t){var e=function(e,s){var a={headerText:"提示信息",bodyText:"设置成功",closeText:"关闭"},l={templateUrl:"myModalContent.html"};angular.extend(l,s),angular.extend(a,e);t.open({templateUrl:l.templateUrl,controller:"ModalInstanceCtrl",resolve:{items:function(){return a}}})};return{tips:e}}]).controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(t,e,s){t.items=s,t.selected={item:t.items[0]},t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),angular.module("hop").factory("HopPermit",["req",function(){var t=[100,10,11,12,103],e={menus:{},checkType:function(e){return-1!==t.indexOf(e)?!0:!1}};return{getPermit:function(t){return e.checkType(t)?!0:!1}}}]).factory("HopAuth",["HopPermit","$cookieStore","req","dialog",function(t,e,s,a){var l={isLogin:!1,getAuth:function(){var s=parseInt(e.get("type"));return t.getPermit(s)?(this.isLogin=!0,!0):(this.isLogin=!1,!1)},changePwd:function(t){var l=this;l.isLogin&&a.tips({headerText:"修改密码",actionText:"修改密码",ok:function(o){return o.newRePassword!=o.newPassword?!1:(angular.isDefined(t)||(t=e.get("id")),s.getdata("user/update_password","POST",function(t){0===parseInt(t.status)?(a.tips({bodyText:t.msg}),l.isLogin=!1,e.remove("type"),e.remove("id"),s.redirect("/user/login")):a.tips({bodyText:t.msg})},o),!1)}},{templateUrl:"password.html"})}};return{isLogin:l.isLogin,auth:l.getAuth,info:{id:e.get("id"),type:e.get("type")},logout:function(){s.getdata("user/logout","GET",function(){e.remove("type"),e.remove("id"),s.redirect("/login")})},pwd:l.changePwd}}]),angular.module("dachu.widget",[]).directive("dachuPagination",[function(){return{restrict:"EA",template:'<div class="page-list"><ul class="pagination" ng-show="conf.totalItems > 0"><li ng-class="{disabled: conf.currentPage == 1}" ng-click="prevPage()"><span>&laquo;</span></li><li ng-repeat="item in pageList track by $index" ng-class="{active: item == conf.currentPage, separate: item == \'...\'}" ng-click="changeCurrentPage(item)"><span>{{ item }}</span></li><li ng-class="{disabled: conf.currentPage == conf.numberOfPages}" ng-click="nextPage()"><span>&raquo;</span></li></ul><div class="page-total" ng-show="conf.totalItems > 0">第<input type="text" ng-model="jumpPageNum"  ng-keyup="jumpToPage($event)"/>页 每页<select ng-model="conf.itemsPerPage" ng-options="option for option in conf.perPageOptions " ng-change="changeItemsPerPage()"></select>/共<strong>{{ conf.totalItems }}</strong>条</div><div class="no-items" ng-show="conf.totalItems <= 0">暂无数据</div></div>',replace:!0,scope:{conf:"="},link:function(t){function e(){t.conf.currentPage=parseInt(t.conf.currentPage)?parseInt(t.conf.currentPage):1,t.conf.totalItems=parseInt(t.conf.totalItems),t.conf.rememberPerPage?(parseInt(localStorage[t.conf.rememberPerPage])||(localStorage[t.conf.rememberPerPage]=parseInt(t.conf.itemsPerPage)?parseInt(t.conf.itemsPerPage):15),t.conf.itemsPerPage=parseInt(localStorage[t.conf.rememberPerPage])):t.conf.itemsPerPage=parseInt(t.conf.itemsPerPage)?parseInt(t.conf.itemsPerPage):15,t.conf.numberOfPages=Math.ceil(t.conf.totalItems/t.conf.itemsPerPage),t.conf.currentPage<1&&(t.conf.currentPage=1),t.conf.currentPage>t.conf.numberOfPages&&(t.conf.currentPage=t.conf.numberOfPages),t.jumpPageNum=t.conf.currentPage;for(var e,s=t.conf.perPageOptions.length,a=0;s>a;a++)parseInt(t.conf.perPageOptions[a])==parseInt(t.conf.itemsPerPage)&&(e=!0);if(e||t.conf.perPageOptions.push(t.conf.itemsPerPage),t.conf.perPageOptions.sort(function(t,e){return t-e}),t.pageList=[],t.conf.numberOfPages<=t.conf.pagesLength)for(a=1;a<=t.conf.numberOfPages;a++)t.pageList.push(a);else{var l=(t.conf.pagesLength-1)/2;if(t.conf.currentPage<=l){for(a=1;l+1>=a;a++)t.pageList.push(a);t.pageList.push("..."),t.pageList.push(t.conf.numberOfPages)}else if(t.conf.currentPage>t.conf.numberOfPages-l){for(t.pageList.push(1),t.pageList.push("..."),a=l+1;a>=1;a--)t.pageList.push(t.conf.numberOfPages-a);t.pageList.push(t.conf.numberOfPages)}else{for(t.pageList.push(1),t.pageList.push("..."),a=Math.ceil(l/2);a>=1;a--)t.pageList.push(t.conf.currentPage-a);for(t.pageList.push(t.conf.currentPage),a=1;l/2>=a;a++)t.pageList.push(t.conf.currentPage+a);t.pageList.push("..."),t.pageList.push(t.conf.numberOfPages)}}t.conf.onChange&&t.conf.onChange(),t.$parent.conf=t.conf}t.changeCurrentPage=function(e){"..."!==e&&(t.conf.currentPage=e)},t.conf.pagesLength=parseInt(t.conf.pagesLength)?parseInt(t.conf.pagesLength):9,t.conf.pagesLength%2===0&&(t.conf.pagesLength=t.conf.pagesLength-1),t.conf.perPageOptions||(t.conf.perPageOptions=[10,15,20,30,50]),t.prevPage=function(){t.conf.currentPage>1&&(t.conf.currentPage-=1)},t.nextPage=function(){t.conf.currentPage<t.conf.numberOfPages&&(t.conf.currentPage+=1)},t.jumpToPage=function(){t.jumpPageNum=t.jumpPageNum.replace(/[^0-9]/g,""),""!==t.jumpPageNum&&(t.conf.currentPage=t.jumpPageNum)
},t.changeItemsPerPage=function(){t.conf.rememberPerPage&&localStorage.removeItem(t.conf.rememberPerPage)},t.$watch(function(){var e=t.conf.currentPage+" "+t.conf.totalItems+" ";return e+=t.conf.rememberPerPage&&localStorage[t.conf.rememberPerPage]?localStorage[t.conf.rememberPerPage]:t.conf.itemsPerPage},e)}}}]),angular.module("hop").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,s){var a="app/modules";t.state("home",{url:"/",templateUrl:a+"/home/home.html",controller:"HomeCtrl"}).state("home.product",{url:"product",templateUrl:a+"/product/list.html",controller:"ProductCtrl"}).state("home.storage",{url:"storage",templateUrl:a+"/storage/list.html",controller:"storageCtrl"}).state("home.productAdd",{url:"product/add",templateUrl:a+"/product/add.html",controller:"ProductAddCtrl"}).state("home.productEdit",{url:"product/{productId:[0-9]{1,}}",templateUrl:a+"/product/add.html",controller:"ProductEditCtrl"}).state("home.adsCreate",{url:"ads/create",templateUrl:a+"/ads/add.html",controller:"AdvCreateCtrl"}).state("home.ads",{url:"ads",templateUrl:a+"/ads/list.html",controller:"AdsCtrl"}).state("home.posCreate",{url:"position/create",templateUrl:a+"/adsPosition/add.html",controller:"AdsPosCreateCtrl"}).state("home.adsPosition",{url:"position",templateUrl:a+"/adsPosition/list.html",controller:"AdsPosCtrl"}).state("home.activity",{url:"activity",templateUrl:a+"/activity/list.html",controller:"ActivityCtrl"}).state("home.actCreate",{url:"activity/add",templateUrl:a+"/activity/add.html",controller:"ActivityAddCtrl"}).state("home.subject",{url:"subject",templateUrl:a+"/subjects/list.html",controller:"SubjectCtrl"}).state("home.subCreate",{url:"subject/add",templateUrl:a+"/subjects/add.html",controller:"SubjectAddCtrl"}).state("login",{url:"/login",templateUrl:a+"/user/login.html",controller:"LoginCtrl"}),e.otherwise("/"),s.html5Mode(!0)}]),angular.module("hop").provider("appConfigure",{$get:["$location",function(t){var e=t.$$host;return e.indexOf("dachuwang")<0&&(e="sms.dachuwang.net"),{url:"http://api."+e}}]}),angular.module("hop").run(["$templateCache",function(t){t.put("components/navbar/navbar.html",'<div ng-show="is_loading" class="loading-mask"><em></em></div><nav class="navbar navbar-inverse navbar-fixed-top" ng-controller="TopCtrl"><script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2>{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><script type="text/ng-template" id="password.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <form class="row block block-col form-horizontal" role="form" name="passwordForm"> <div class="form-group col-xs-12"> <label for="password" class="col-sm-2 control-label"> <h5> <b>旧密码</b> </h5> </label> <div class="col-sm-10"> <input type="password" required class="input-lg form-control" ng-model="reg.password" id="password" placeholder="请输入您的旧密码" ng-minlength="6" name="oldpassword"> <div class="col-xs-12 block-col label label-danger" ng-show="passwordForm.oldpassword.$dirty && passwordForm.oldpassword.$invalid"> <small ng-show="passwordForm.oldpassword.$error.minlength">旧密码至少6位</small> <small ng-show="passwordForm.oldpassword.$error.required">旧密码必填</small> </div> </div> </div> <div class="form-group col-xs-12"> <label for="newpassword" class="col-sm-2 control-label"> <h5> <b>新密码</b> </h5> </label> <div class="col-sm-10"> <input type="password" required class="input-lg form-control" ng-model="reg.newPassword" id="newPassword" placeholder="请输入您的新密码" ng-minlength="6" name="password"> <div class="col-xs-12 block-col label label-danger" ng-show="passwordForm.password.$dirty && passwordForm.password.$invalid"> <small ng-show="passwordForm.password.$error.minlength">密码至少6位</small> <small ng-show="passwordForm.password.$error.required">密码必填</small> </div> </div> </div> <div class="form-group col-xs-12"> <label for="newpassword" class="col-sm-2 control-label"> <h5> <b>输入新密码</b> </h5> </label> <div class="col-sm-10"> <input type="password" required class="input-lg form-control" ng-model="reg.newRePassword" id="newRePassword" ng-minlength="6" placeholder="请再次输入您的新密码" name="repassword"> <div class="col-xs-12 block-col label label-danger" ng-show="passwordForm.repassword.$dirty && passwordForm.repassword.$invalid"> <small ng-show="passwordForm.repassword.$error.minlength">确认密码至少6位</small> <small ng-show="passwordForm.repassword.$error.required">确认密码必填</small> </div> <div class="col-xs-12 block-col label label-danger" ng-show="passwordForm.repassword.$dirty && passwordForm.repassword.$valid && reg.newRePassword != reg.newPassword"> <small>两次密码不一致</small> </div> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok(reg);cancel()" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><div class="container-fluid" ng-controller="NavbarCtrl"><div class="navbar-header" style="width:100%;"><a style="padding-right:0;" href="javascript:history.back()" class="glyphicon navbar-brand glyphicon-chevron-left"></a> <a href="/" class="navbar-brand">{{title}}</a><div ng-if="isLogin"><ul class="nav navbar-nav navbar-right"><li class="dropdown" dropdown=""><a href="/" class="dropdown-toggle" dropdown-toggle="">{{userInfo}}<span class="caret"></span></a><ul class="dropdown-menu"><li ng-click="changePwd()"><a href="#">修改密码</a></li><li ng-click="logout()"><a href="#">登出</a></li><div class="mobile_menu" ng-controller="SidebarCtrl"><ul ng-repeat="url in urls"><li ng-repeat="item in url.val"><a ng-href="{{item.val}}" ng-class="{\'active\': item.val==currentUrl}" class="nav-li-child">{{item.name}}</a></li></ul></div></ul></li></ul></div></div></div></nav><div class="nav-mt"></div>'),t.put("components/navbar/navsidebar.html",'<div class="col-xs-2 sidebar" ng-controller="SidebarCtrl"><ul class="nav nav-sidebar"><li role="presentation" ng-click="changeUrl(item.val)"><a ng-href="/" ng-class="{\'active\': currentUrl==\'/\'}" class="nav-li">首页</a></li></ul><ul class="nav nav-sidebar" ng-repeat="url in urls"><li><h4 class="nav-li">{{url.name}}</h4></li><li ng-repeat="item in url.val" ng-click="changeUrl(item.val)"><a ui-sref="{{item.val}}" ng-class="{\'active\': item.val===selectedItem}" class="nav-li-child">{{item.name}}</a></li></ul></div>'),t.put("app/modules/activity/add.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="row block ml-default bs-callout"><table class="table table-striped"><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 所属站点</b></td><td class="success col-xs-12"><select ng-model="site" class="col-xs-4 input-md form-control" ng-options="m.name for m in siteSrcs" required=""></select></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 所属城市</b></td><td class="success col-xs-12"><select ng-model="location" class="col-xs-4 input-md form-control" ng-options="m.name for m in locationInfo" ng-change="getMaps()" required=""></select></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 活动标题</b></td><td class="success col-xs-12"><input type="text" ng-model="name" class="form-control"></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 活动类型</b></td><td class="success col-xs-12"><select ng-model="ruleType" class="form-control" ng-options="m.name for m in type" required=""><option value="">请选择活动类型</option></select></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 活动规则</b></td><td class="success col-xs-12"><input type="text" ng-model="rule" class="form-control" name="name_value" id="name_value" required="" placeholder="请输入规则例如，119-10（代表满119减20）"></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 活动开始时间</b></td><td class="success col-xs-12"><input type="text" is-open="opened" datepicker-popup="yyyy-MM-dd" ng-click="open($event)" datepicker-options="dateOptions" class="form-control" ng-model="startTime" id="startTime" placeholder="点击获取时间"></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 活动结束时间</b></td><td class="success col-xs-12"><input type="text" ng-model="endTime" class="form-control" datepicker-popup="yyyy-MM-dd" datepicker-options="endDateOptions" ng-click="endOpen($event)" is-open="endOpened" id="endTime" placeholder="点击获取时间"></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 最晚配送时间</b></td><td class="success col-xs-12"><input type="text" ng-model="latestDeliverTime" class="form-control" datepicker-popup="yyyy-MM-dd" datepicker-options="latestOptions" ng-click="latestOpen($event)" min-date="startTime" is-open="latestOpened" id="latestTime" placeholder="点击获取时间"></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 参与活动的订单类型</b></td><td class="success col-xs-12"><select ng-model="orderType" class="form-control" ng-options="m.name for m in orderTypes" required=""><option value="">请选择参与活动的订单类型</option></select></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 是否只限首单</b></td><td class="success col-xs-12"><select ng-model="isFirst" class="form-control" ng-options="m.name for m in firstOptions" required=""></select></td></tr><tr><td class="active col-xs-2"><b>参加活动的分类名称</b></td><td class="success col-xs-12"><input type="text" class="col-xs-4 input-md form-control" ng-model="categoryNames" placeholder="请输入参加活动的分类名称，多个分类用“|”分隔"></td></tr><tr><td class="active col-xs-2"><b>下单时至少需同时包含几个分类</b></td><td class="success col-xs-12"><input type="text" class="col-xs-4 input-md form-control" ng-model="categoryLimitNum" placeholder="请输入数字，0或不填为不限制"></td></tr><tr><td>&nbsp;</td><td><div class="col-xs-6"><button type="submit" class="btn btn-block btn-success btn-md" ng-click="add()">保存</button></div><div class="col-xs-6"><button type="reset" reback="" class="btn btn-block btn-default btn-md">返回</button></div></td></tr></table></div></div><div class="block-title"></div>'),t.put("app/modules/activity/list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="mt-10"><div class="form-group row"><div class="col-xs-4"><a class="btn-block btn btn-info" ui-sref="home.actCreate">发布运营活动</a></div></div></div><div class="block mt-10"><a ng-click="filterByStatus(\'all\');" ng-class="{\'btn-info\': status == \'all\'}" class="btn">全部 <span class="badge">{{total[4]}}</span></a> <a ng-click="filterByStatus(\'1\');" ng-class="{\'btn-info\': status == \'1\'}" class="btn">已上线 <span class="badge">{{total[2]}}</span></a> <a ng-click="filterByStatus(\'0\');" ng-class="{\'btn-info\': status == \'0\'}" class="btn">已下线 <span class="badge">{{total[2]}}</span></a></div><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><div class="input-group"><div class="input-group-addon">关键词</div><input type="text" ng-model="key" class="form-control" placeholder="请输入活动名称"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search();">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="reset();">重置</button></div></form></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-3"></colgroup><thead><tr><td><h5><em class="text-danger">活动id</em></h5></td><td class="text-center"><h5>活动名称</h5></td><td class="text-center"><h5>活动时间</h5></td><td class="text-center"><h5>最晚配送时间</h5></td><td class="text-center"><h5>活动规则</h5></td><td class="text-center"><h5>状态</h5></td><td class="text-center"><h5>所属站点</h5></td><td class="text-center"><h5>所属城市</h5></td><td class="text-center"><h5>更新时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody><tr ng-repeat="item in advs"><td><h5><em class="text-danger">{{item.id}}</em></h5></td><td class="text-center"><h5>{{item.title}}</h5></td><td class="text-center"><h5>{{item.act_start_time}}/{{item.act_end_time}}</h5></td><td class="text-center"><h5>{{item.latest_deliver_time}}</h5></td><td class="text-center"><h5>{{item.rule}}</h5></td><td class="text-center"><h5><span class="label label-success" ng-if="item.status == 1">已上线</span> <span class="label label-danger" ng-if="item.status == 0">已下线</span></h5></td><td class="text-center"><h5>{{item.site_cn}}</h5></td><td class="text-center"><h5>{{item.location_cn}}</h5></td><td class="text-center"><h5>{{item.updated_time}}</h5></td><td class="text-center"><h5><a ng-if="item.status == 1" class="btn btn-danger btn-sm btn_mb5" ng-click="setStatus(item, 0)">下线</a> <a ng-if="item.status != 1" class="btn btn-success btn-sm btn_mb5" ng-click="setStatus(item, 1)">上线</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/activity/tips.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <div class="row form-horizontal"> <div class="col-xs-12 form-group"> <select ng-model="selectCity" ng-change="items.cityChange(selectCity)" class="form-control" ng-options="item.name for item in items.bodyText"> <option value="">请选择所在城市</option> </select> </div> <div class="col-xs-12 form-group"> <select ng-model="selectMarket" class="form-control" ng-options="item.name for item in items.markets"> <option value="">请选择所在市场</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok(selectCity, selectMarket);cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script>'),t.put("app/modules/ads/add.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><form class="form-horizontal" novalidate="" role="form" id="addForm" name="addForm"><div class="row block ml-default bs-callout"><table class="table table-striped"><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 选择广告位</b></td><td class="success col-xs-12"><label ng-repeat="pos in positions"><input ng-model="pos.checked" type="checkbox"> {{pos.title}} &nbsp;</label></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 广告名称</b></td><td class="success col-xs-12"><input class="form-control" type="text" ng-model="name" required=""></td></tr><tr><td><em class="text-danger">*</em>上传banner图片</td><td><div class="col-xs-12"><span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}"><i class="glyphicon glyphicon-plus"></i> <span class="button" ng-file-select="" ng-model="files">上传banner图片</span></span> <span class="alert text-danger"><span class="glyphicon glyphicon-pencil m-r-5"></span>banner图片将展示在所选广告位</span></div><div class="panel panel-default" ng-if="imgUploads.length"><div class="panel-heading">当前banner图片</div><div class="panel-body"><table class="table table-striped files"><tr ng-repeat="files in imgUploads"><td><div class="col-xs-6 col-md-3"><img width="100" ng-show="files.dataUrl != null" ng-src="{{files.dataUrl}}" class="thumbnail"></div></td><td>{{files.name}}</td><td><div class="btn btn-warning cancel" ng-click="picCancel(files, 0)"><i class="glyphicon glyphicon-ban-circle"></i> <span>取消</span></div></td></tr></table></div></div></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em>上线时间</b></td><td class="success col-xs-12"><input type="text" is-open="opened" datepicker-popup="yyyy-MM-dd" ng-click="open($event)" datepicker-options="dateOptions" class="form-control" required="" max-date="endTime" ng-model="startTime" id="startTime" placeholder="点击获取时间"></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em>下线时间</b></td><td class="success col-xs-12"><input type="text" ng-model="endTime" class="form-control" datepicker-popup="yyyy-MM-dd" datepicker-options="endDateOptions" min-date="startTime" required="" ng-click="endOpen($event)" is-open="endOpened" id="endTime" placeholder="点击获取时间"></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 所属站点</b></td><td class="success col-xs-12"><select ng-model="site" class="col-xs-4 input-md form-control" ng-options="m.name for m in siteSrcs" ng-change="getMaps()" required=""></select></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 所属城市</b></td><td class="success col-xs-12"><select ng-model="location" class="col-xs-4 input-md form-control" ng-options="m.name for m in locationInfo" ng-change="getMaps()" required=""></select></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 可见性</b></td><td class="success col-xs-12"><select ng-init="m = loginStatus[0]" ng-model="m" class="col-xs-4 input-md form-control" ng-options="m.name for m in loginStatus" ng-change="getLoginStatus(m)" required=""></select></td></tr><tr ng-show="show_line"><td class="active col-xs-2"><b><em class="text-danger">*</em> 所属线路</b></td><td class="success col-xs-12"><div class="checkbox inline col-xs-3" ng-repeat="m in line_default"><label><input type="checkbox" ng-model="m.checked"> {{m.name}}</label></div></td></tr><tr><td class="active col-xs-2"><b>选择映射分类</b></td><td class="success col-xs-12"><div class="col-xs-2 p-0"><select ng-model="catemap_s" class="input-md form-control inline" ng-options="m.name for m in cateMaps | filter : vm.filters.name"><option value="">--选择映射分类--</option></select></div><div class="col-xs-3 input-group pull-left p-0"><div class="input-group-addon"><span class="glyphicon glyphicon-search"></span></div><input type="text" ng-model="vm.filters.name" class="form-control" placeholder="输入货物名进行过滤"></div><span class="text-danger col-xs-7 line_h_34"><span class="glyphicon glyphicon-pencil m-r-5"></span>选择映射分类后，banner将链接到选中分类的list页面</span></td></tr><tr ng-show="!catemap_s"><td class="active col-xs-2"><b>自定义连接</b></td><td class="success col-xs-12"><div class="col-xs-5 p-0"><input class="form-control" placeholder="/subject/xxx (xx为专题id)" type="text" ng-model="link_url"></div><span class="text-danger col-xs-7 line_h_34"><span class="glyphicon glyphicon-pencil m-r-5"></span> 专题url格式:/subject/1</span></td></tr><tr><td>&nbsp;</td><td><div class="col-xs-6"><button type="submit" class="btn btn-block btn-success btn-md" ng-click="add(addForm)">保存</button></div><div class="col-xs-6"><button type="reset" class="btn btn-block btn-default btn-md" ng-click="reset()">重置</button></div></td></tr></table></div></form></div><div class="block-title"></div>'),t.put("app/modules/ads/list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="mt-10"><div class="form-group row"><div class="col-xs-4"><a class="btn-block btn btn-info" ui-sref="home.adsCreate">发布广告</a></div></div></div><div class="block mt-10"><a ng-click="filterByStatus(\'all\');" ng-class="{\'btn-info\': status == \'all\'}" class="btn">全部 <span class="badge">{{total[4]}}</span></a> <a ng-click="filterByStatus(\'1\');" ng-class="{\'btn-info\': status == \'1\'}" class="btn">已上线 <span class="badge">{{total[2]}}</span></a> <a ng-click="filterByStatus(\'2\');" ng-class="{\'btn-info\': status == \'2\'}" class="btn">已下线 <span class="badge">{{total[2]}}</span></a></div><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><div class="input-group"><div class="input-group-addon">关键词</div><input type="text" ng-model="key" class="form-control" placeholder="请输入广告名称"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search();">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="reset();">重置</button></div></form></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-3"></colgroup><thead><tr><td><h5><em class="text-danger">广告id</em></h5></td><td class="text-center"><h5>广告名称</h5></td><td class="text-center"><h5>图片</h5></td><td class="text-center"><h5>广告位</h5></td><td class="text-center"><h5>广告状态</h5></td><td class="text-center"><h5>所属站点</h5></td><td class="text-center"><h5>所属城市</h5></td><td class="text-center"><h5>更新时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody><tr ng-repeat="item in advs"><td><h5><em class="text-danger">{{item.id}}</em></h5></td><td class="text-center"><h5>{{item.title}}</h5></td><td class="text-center"><h5><img ng-src="{{item.pic_url}}" class="thumbnail" width="80"></h5></td><td class="text-center"><h5 ng-repeat="pos_cn in item.pos_cn">{{item.pos_cn[0]}}</h5></td><td class="text-center"><h5><span class="label label-success" ng-if="item.status == 1">已上线</span> <span class="label label-danger" ng-if="item.status == 0">已下线</span></h5></td><td class="text-center"><h5>{{item.site_cn}}</h5></td><td class="text-center"><h5>{{item.location_cn}}</h5><h5>{{item.line_cn}}</h5></td><td class="text-center"><h5>{{item.updated_time}}</h5></td><td class="text-center"><h5><a ng-if="item.status == 1" class="btn btn-danger btn-sm btn_mb5" ng-click="setStatus(item, 0)">下线</a> <a ng-if="item.status != 1" class="btn btn-success btn-sm btn_mb5" ng-click="setStatus(item, 1)">上线</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/ads/tips.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <div class="row form-horizontal"> <div class="col-xs-12 form-group"> <select ng-model="selectCity" ng-change="items.cityChange(selectCity)" class="form-control" ng-options="item.name for item in items.bodyText"> <option value="">请选择所在城市</option> </select> </div> <div class="col-xs-12 form-group"> <select ng-model="selectMarket" class="form-control" ng-options="item.name for item in items.markets"> <option value="">请选择所在市场</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok(selectCity, selectMarket);cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script>'),t.put("app/modules/adsPosition/add.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="row block ml-default bs-callout"><table class="table table-striped"><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 广告名称</b></td><td class="success col-xs-12"><input class="form-control" type="text" ng-model="pos.title" required=""></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 广告位状态</b></td><td class="success col-xs-12"><select ng-model="pos_status" class="col-xs-4 input-md form-control" ng-options="m.name for m in options.status" required=""></select></td></tr><tr><td>&nbsp;</td><td><div class="col-xs-6"><button type="submit" class="btn btn-block btn-success btn-md" ng-click="add()">保存</button></div><div class="col-xs-6"></div></td></tr></table></div></div><div class="block-title"></div>'),t.put("app/modules/adsPosition/list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="mt-10"><div class="form-group row"><div class="col-xs-4"><a class="btn-block btn btn-info" ui-sref="home.posCreate">发布广告位</a></div></div></div><div class="block mt-10"><a ng-click="filterByStatus(\'all\');" ng-class="{\'btn-info\': status == \'all\'}" class="btn">全部 <span class="badge">{{total[\'all\']}}</span></a> <a ng-click="filterByStatus(\'1\');" ng-class="{\'btn-info\': status == \'1\'}" class="btn">已启用 <span class="badge">{{total[1]}}</span></a> <a ng-click="filterByStatus(\'0\');" ng-class="{\'btn-info\': status == \'0\'}" class="btn">已禁用 <span class="badge">{{total[0]}}</span></a></div><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><div class="input-group"><div class="input-group-addon">关键词</div><input type="text" ng-model="key" class="form-control" placeholder="请输入广告位描述"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search();">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="reset();">重置</button></div></form></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-3"></colgroup><thead><tr><td><h5><em class="text-danger">广告位id</em></h5></td><td class="text-center"><h5>广告位名称</h5></td><td class="text-center"><h5>广告位状态</h5></td><td class="text-center"><h5>上一次更新时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody><tr ng-repeat="item in positions"><td><h5><em class="text-danger">{{item.id}}</em></h5></td><td class="text-center"><h5>{{item.title}}</h5></td><td class="text-center"><h5><span class="label label-success" ng-if="item.status == 1">已启用</span> <span class="label label-danger" ng-if="item.status == 0">已禁用</span></h5></td><td class="text-center"><h5>{{item.updated_time}}</h5></td><td class="text-center"><h5><a ng-if="item.status == 1" class="btn btn-danger btn-sm btn_mb5" ng-click="setStatus(item, 0)">禁用广告位</a> <a ng-if="item.status != 1" class="btn btn-success btn-sm btn_mb5" ng-click="setStatus(item, 1)">启用广告位</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/adsPosition/tips.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <div class="row form-horizontal"> <div class="col-xs-12 form-group"> <select ng-model="selectCity" ng-change="items.cityChange(selectCity)" class="form-control" ng-options="item.name for item in items.bodyText"> <option value="">请选择所在城市</option> </select> </div> <div class="col-xs-12 form-group"> <select ng-model="selectMarket" class="form-control" ng-options="item.name for item in items.markets"> <option value="">请选择所在市场</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok(selectCity, selectMarket);cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script>'),t.put("app/modules/home/achieve.html",'<div class="container-fluid" ng-controller="HomeAchieveCtrl"><div ng-include="\'components/navbar/navbar.html\'"></div><div id="row block-title"><div ng-include="\'components/navbar/navsidebar.html\'"></div><div class="col-xs-offset-2 col-xs-10"><div class="row block block-col text-center" ng-if="data==\'\'"><h5>暂无记录</h5></div><div ng-if="data"><table class="table table-bordered table-striped"><colgroup><col class="col-xs-3"><col class="col-xs-3"><col class="col-xs-3"><col class="col-xs-3"></colgroup><tbody><tr><td class="text-center"><h5>今日新增供应商</h5></td><td class="text-center"><h5>{{data.today_new_seller}}</h5></td><td class="text-center"><h5>总供应商</h5></td><td class="text-center"><h5>{{data.total_seller}}</h5></td></tr><tr><td class="text-center"><h5>今日新增采购商</h5></td><td class="text-center"><h5>{{data.today_new_buyer}}</h5></td><td class="text-center"><h5>总采购商</h5></td><td class="text-center"><h5>{{data.total_buyer}}</h5></td></tr><tr><td class="text-center"><h5>今日订单数</h5></td><td class="text-center"><h5>{{data.today_new_order}}</h5></td><td class="text-center"><h5>总订单数</h5></td><td class="text-center"><h5>{{data.total_order}}</h5></td></tr><tr><td class="text-center"><h5>今日订单金额</h5></td><td class="text-center"><h5>{{data.today_deal_amount}}&nbsp;元</h5></td><td class="text-center"><h5>总订单金额</h5></td><td class="text-center"><h5>{{data.total_deal_amount}}&nbsp;元</h5></td></tr><tr><td class="text-center"><h5>今日新商品数</h5></td><td class="text-center"><h5>{{data.today_new_product}}</h5></td><td class="text-center"><h5>总商品数</h5></td><td class="text-center"><h5>{{data.total_product}}</h5></td></tr></tbody></table></div></div></div></div>'),t.put("app/modules/home/home.html",'<div class="container-fluid" ng-controller="HomeCtrl"><div ng-include="\'components/navbar/navbar.html\'"></div><div id="row block-title"><div ng-include="\'components/navbar/navsidebar.html\'"></div><div ui-view=""></div></div></div>'),t.put("app/modules/product/add.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div ng-if="!product.id" class="row block mt-10 ml-default bs-callout"><form class="form-inline"><div class="form-group"><div class="input-group"><span class="input-group-addon" id="sizing-addon1">货号</span> <input type="text" ng-model="init.skuNumber" class="form-control" aria-describedby="sizing-addon1"></div><button ng-click="getSkuInfo(1)" class="btn btn-primary">检索</button> <button ng-click="getSkuInfo(0)" class="btn btn-danger">重置</button></div></form></div><form class="form-horizontal" novalidate="" role="form" id="addForm" name="addForm"><div ng-if="info" class="row block ml-default bs-callout form-horizontal"><table class="table table-striped"><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 商品货号</b></td><td class="success col-xs-12"><input class="form-control" type="text" ng-model="product.skuNumber" required="" readonly=""></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> sku所属分类</b></td><td class="success col-xs-12"><span>{{info.cate_name}}</span></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> sku内部名称</b></td><td class="success col-xs-12"><span>{{info.name}}</span></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 商品名称</b></td><td class="success col-xs-12"><input class="form-control" type="text" ng-model="product.title" required=""></td></tr><tr><td class="active col-xs-2"><b>商品广告语</b></td><td class="success col-xs-12"><input class="form-control" type="text" ng-model="product.advWords"></td></tr><tr><td class="active col-xs-2"><b>显示‘约’</b></td><td class="success col-xs-12"><div class="checkbox"><label><input type="checkbox" ng-checked="init.isRound" ng-model="init.isRound"></label></div></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 售卖城市</b></td><td class="success col-xs-12"><select ng-model="init.location" class="col-xs-4 input-md form-control" ng-options="location.name for location in locations" ng-change="selectCity()" required=""></select></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 可见性</b></td><td class="success col-xs-12"><select ng-model="init.visiable" class="col-xs-4 input-md form-control" ng-options="visiable.name for visiable in visiables" required=""></select></td></tr><tr ng-show="init.visiable.id == 2"><td class="active col-xs-2"><b><em class="text-danger">*</em> 所属线路</b></td><td class="success col-xs-12"><div class="checkbox col-xs-3" ng-repeat="line in lines"><label><input type="checkbox" ng-model="line.checked"> {{line.name}}</label></div></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 预定价</b></td><td class="success input-group"><input class="form-control" type="text" ng-model="product.price" required=""> <span class="input-group-addon" id="sizing-addon1">元</span></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 市场价</b></td><td class="success input-group"><input class="form-control" type="text" ng-model="product.marketPrice" required=""> <span class="input-group-addon" id="sizing-addon1">元</span></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 售卖单位</b></td><td class="success col-xs-12"><select ng-model="init.unit" class="col-xs-4 input-md form-control" ng-options="m.name for m in info.units" required=""></select></td></tr><tr><td class="active col-xs-2"><b>库存(-1代表充足库存)</b></td><td class="success input-group"><input class="form-control" type="text" ng-model="product.storage"> <span class="input-group-addon" id="sizing-addon1">{{init.unit.name}}</span></td></tr><tr><td class="active col-xs-2"><b>每人限购</b></td><td class="success input-group"><input class="form-control" type="text" ng-model="product.buyLimit"> <span class="input-group-addon" id="sizing-addon1">{{init.unit.name}}</span></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 结算单价</b></td><td class="success input-group"><input class="form-control" type="text" ng-model="product.singlePrice" required=""> <span class="input-group-addon" id="sizing-addon1">元</span><select ng-model="init.closeUnit" class="col-xs-4 input-md form-control" ng-options="m.name for m in info.units" required=""></select></td></tr><tr ng-if="info.spec.length"><td class="active col-xs-2"><b>基础属性</b></td><td class="success col-xs-12"><h5 ng-repeat="item in info.spec" class="text-default">{{item.name}}: {{item.val}}</h5></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 商品上架状态</b></td><td class="success col-xs-12"><select ng-model="init.productStatus" class="col-xs-4 input-md form-control" ng-options="m.name for m in info.product_status" required=""></select></td></tr><tr><td>&nbsp;</td><td><div class="col-xs-6"><button type="submit" class="btn btn-block btn-success btn-md" ng-click="add()">保存</button></div><div class="col-xs-6"><button type="reset" class="btn btn-block btn-default btn-md" ng-click="reset()">重置</button></div></td></tr></table></div></form></div><div class="block-title"></div>'),t.put("app/modules/product/list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="mt-10"><div class="form-group row"><div class="col-xs-4"><a class="btn-block btn btn-info" ui-sref="home.productAdd">发布商品</a></div></div></div><div class="block mt-10"><a ng-click="filterByStatus(\'all\');" ng-class="{\'btn-info\': status == \'all\'}" class="btn">全部 <span class="badge">{{total[4]}}</span></a> <a ng-click="filterByStatus(\'1\');" ng-class="{\'btn-info\': status == \'1\'}" class="btn">已上架 <span class="badge">{{total[2]}}</span></a> <a ng-click="filterByStatus(\'2\');" ng-class="{\'btn-info\': status == \'2\'}" class="btn">待上架 <span class="badge">{{total[2]}}</span></a> <a ng-click="filterByStatus(\'0\');" ng-class="{\'btn-info\': status == \'0\'}" class="btn">已下架 <span class="badge">{{total[2]}}</span></a></div><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><div class="input-group"><select ng-model="locate" class="form-control" ng-options="location.name for location in locations"></select></div></div><div class="form-group"><div class="input-group"><div class="input-group-addon">关键词</div><input type="text" ng-model="key" class="form-control" placeholder="请输入商品名或货号"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search();">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="reset();">重置</button></div></form></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-1"><col class="col-xs-1"></colgroup><thead><tr><td><h5><em class="text-danger">货号</em></h5></td><td class="text-center"><h5>商品名称</h5></td><td class="text-center"><h5>售卖价/市场价/单位</h5></td><td class="text-center"><h5>结算单价</h5></td><td class="text-center"><h5>库存/每人限购</h5></td><td class="text-center"><h5>商品状态</h5></td><td class="text-center"><h5>商品描述</h5></td><td class="text-center"><h5>销售城市线路</h5></td><td class="text-center"><h5>上一次更新时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody><tr ng-repeat="item in products"><td><h5><em class="text-danger">{{item.sku_number}}</em></h5></td><td class="text-center"><h5>{{item.title}}</h5></td><td class="text-center"><h5><span ng-if="item.is_round == 1">约</span>{{item.price}}/{{item.market_price}} 元/{{item.unit}}</h5></td><td class="text-center"><h5 ng-if="item.close_unit_name">{{item.single_price}} 元/{{item.close_unit_name}}</h5><h5 ng-if="!item.close_unit_name">--</h5></td><td class="text-center"><h5 ng-if="item.storage">{{item.storage_cn}}</h5><h5 ng-if="item.buy_limit">{{item.buy_limit_cn}}</h5></td><td class="text-center"><h5><span class="label label-success" ng-if="item.status == 1">已上架</span> <span class="label label-default" ng-if="item.status == 2">待上架</span> <span class="label label-danger" ng-if="item.status == 0">已下架</span></h5></td><td class="text-left text-danger"><h5 ng-repeat="it in item.spec">{{it.name}} : {{it.val}}</h5></td><td class="text-center"><h5>{{item.location_name}}</h5><h5 ng-if="item.visiable == 2">{{item.line_cn}}</h5><h5 ng-if="item.visiable != 2">{{item.visiable_cn}}</h5></td><td class="text-center"><h5>{{item.updated_time}}</h5></td><td class="text-center"><h5 ng-if="item.is_active == 1"><a class="btn btn-primary btn_mb5 btn-sm" ui-sref="home.productEdit({productId:item.id})">编辑商品</a> <a ng-if="item.status == 1" class="btn btn-danger btn-sm btn_mb5" ng-click="setstatus({{item.id}}, 0, $index)">下架商品</a> <a ng-if="item.status != 1" class="btn btn-success btn-sm btn_mb5" ng-click="setstatus({{item.id}}, 1, $index)">上架商品</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/product/tips.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <div class="row form-horizontal"> <div class="col-xs-12 form-group"> <select ng-model="selectCity" ng-change="items.cityChange(selectCity)" class="form-control" ng-options="item.name for item in items.bodyText"> <option value="">请选择所在城市</option> </select> </div> <div class="col-xs-12 form-group"> <select ng-model="selectMarket" class="form-control" ng-options="item.name for item in items.markets"> <option value="">请选择所在市场</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok(selectCity, selectMarket);cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script>'),t.put("app/modules/storage/list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><div class="input-group"><select ng-init="location = locations[0]" ng-model="location" class="form-control" ng-options="location.name for location in locations"></select></div></div><div class="form-group"><div class="input-group"><div class="input-group-addon">关键词</div><input type="text" ng-model="key" class="form-control" placeholder="输入SKU货号或仓库ID"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search();">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="reset();">重置</button></div></form></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-2"></colgroup><thead><tr><td><h5><em class="text-danger">货号</em></h5></td><td class="text-center"><h5>仓库</h5></td><td class="text-center"><h5>仓库id</h5></td><td class="text-center"><h5>在库库存</h5></td><td class="text-center"><h5>订单占用</h5></td><td class="text-center"><h5>虚拟库存</h5></td><td class="text-center"><h5>可售库存</h5></td><td class="text-center"><h5>可超卖量</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody><tr ng-repeat="item in products | filter:filter.sku_number"><td><h5><em class="text-danger">{{item.sku_number}}</em></h5></td><td class="text-center"><h5>{{item.warehouse_name}}</h5></td><td class="text-center"><h5>{{item.warehouse_id}}</h5></td><td class="text-center"><h5>{{item.in_stock}}</h5></td><td class="text-center"><h5>{{item.stock_locked}}</h5></td><td class="text-center"><input type="text" ng-if="item.editing" ng-model="item.virtual_stock" class="form-control"><h5 ng-if="!item.editing">{{item.virtual_stock}}</h5></td><td class="text-center"><h5>{{item.sellable}}</h5></td><td class="text-center"><input type="text" ng-if="item.editing" ng-model="item.exceed_limit" class="form-control"><h5 ng-if="!item.editing">{{item.exceed_limit}}</h5></td><td class="text-center"><h5><a class="btn btn-primary btn_mb5 btn-sm" ng-show="!item.editing" ng-click="edit_storage(item)"><span class="glyphicon glyphicon-floppy-open m-r-5"></span>编辑</a> <a class="btn btn-warning btn_mb5 btn-sm" ng-show="item.editing" ng-click="cancel_storage(item)"><span class="glyphicon glyphicon-ban-circle m-r-5"></span>取消</a> <a class="btn btn-success btn_mb5 btn-sm" ng-show="item.editing" ng-click="save_storage(item)"><span class="glyphicon glyphicon-floppy-save m-r-5"></span>保存</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/subjects/add.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="ok()" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script><div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><form class="" novalidate="" role="form" id="addForm" name="addForm"><div class="row block ml-default bs-callout"><table class="table table-striped"><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 专题名称</b></td><td class="success col-xs-12"><input class="form-control" type="text" ng-model="name" required=""></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em> 所属系统</b></td><td class="success col-xs-12"><select ng-model="site" class="col-xs-4 input-md form-control" ng-options="m.name for m in siteSrcs" ng-change="getMaps()" required=""></select></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em>所属城市</b></td><td class="success col-xs-12"><select ng-model="location" class="col-xs-4 input-md form-control" ng-options="m.name for m in locationInfo" ng-change="getMaps()" required=""></select></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em>上线时间</b></td><td class="success col-xs-12"><input type="text" is-open="opened" datepicker-popup="yyyy-MM-dd" ng-click="open($event)" datepicker-options="dateOptions" class="form-control" max-date="endTime" ng-model="startTime" id="startTime" placeholder="点击获取时间"></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em>下线时间</b></td><td class="success col-xs-12"><input type="text" ng-model="endTime" class="form-control" datepicker-popup="yyyy-MM-dd" datepicker-options="endDateOptions" min-date="startTime" ng-click="endOpen($event)" is-open="endOpened" id="endTime" placeholder="点击获取时间"></td></tr><tr><td class="active col-xs-2"><b><em class="text-danger">*</em>专题类型</b></td><td class="success col-xs-12"><select ng-model="subjectType" class="col-xs-4 input-md form-control" ng-options="m.name for m in subjectTypes" required=""></select></td></tr><tr ng-show="subjectType.id == 1"><td>专题图片</td><td><div class="col-xs-12"><span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}"><i class="glyphicon glyphicon-plus"></i> <span class="button" ng-file-select="" ng-model="files">上传专题图片</span></span></div><div class="panel panel-default" ng-if="imgUploads.length"><div class="panel-heading">当前专题图片</div><div class="panel-body"><table class="table table-striped files"><tr ng-repeat="files in imgUploads"><td><div class="col-xs-6 col-md-3"><img width="100" ng-show="files.dataUrl != null" ng-src="{{files.dataUrl}}" class="thumbnail"></div></td><td>{{files.name}}</td><td><div class="btn btn-warning cancel" ng-click="picCancel(files, 0)"><i class="glyphicon glyphicon-ban-circle"></i> <span>取消</span></div></td></tr></table></div></div></td></tr><tr ng-show="subjectType.id != 1"><td>banner图片</td><td><div class="col-xs-12"><span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}"><i class="glyphicon glyphicon-plus"></i> <span class="button" ng-file-select="" ng-model="files">上传banner图片</span></span></div><div class="panel panel-default" ng-if="imgUploads.length"><div class="panel-heading">当前banner图片</div><div class="panel-body"><table class="table table-striped files"><tr ng-repeat="files in imgUploads"><td><div class="col-xs-6 col-md-3"><img width="100" ng-show="files.dataUrl != null" ng-src="{{files.dataUrl}}" class="thumbnail"></div></td><td>{{files.name}}</td><td><div class="btn btn-warning cancel" ng-click="picCancel(files, 0)"><i class="glyphicon glyphicon-ban-circle"></i> <span>取消</span></div></td></tr></table></div></div></td></tr><tr ng-show="subjectType.id != 1"><td>页尾图片</td><td><div class="col-xs-12"><span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}"><i class="glyphicon glyphicon-plus"></i> <span class="button" ng-file-select="" ng-model="detailImg">上传页尾图片</span></span></div><div class="panel panel-default" ng-if="detailUploads.length"><div class="panel-heading">当前上传图片</div><div class="panel-body"><table class="table table-striped files"><tr ng-repeat="files in detailUploads"><td><div class="col-xs-6 col-md-3"><img width="100" ng-show="files.dataUrl != null" ng-src="{{files.dataUrl}}" class="thumbnail"></div></td><td>{{files.name}}</td><td><div class="btn btn-warning cancel" ng-click="picCancel(files, 1)"><i class="glyphicon glyphicon-ban-circle"></i> <span>取消</span></div></td></tr></table></div></div></td></tr><tr ng-if="subjectType.id != 1"><td class="active col-xs-2"><b><em class="text-danger">*</em>添加商品</b></td><td class="success col-xs-12"><div ng-repeat="item in products"><div class="col-xs-8"><input type="text" ng-model="item.value" class="form-control" name="name_value" id="name_value" required="" placeholder="请输入商品名称或者sku" ng-change="showProduct(item)"><div ng-if="item.products"><ul class="list-group col-xs-12"><li class="list-group-item" ng-click="selectProduct(mitem, item)" ng-repeat="mitem in item.products"><i class="text-danger">{{mitem.sku_number}}</i>|<span>{{mitem.title}}</span>|<span class="text-default">{{mitem.price}}/{{mitem.unit}}</span></li></ul></div></div><div class="col-xs-4"><span class="btn btn-lg {{item.cls}}" ng-click="{{item.clk}}(item)"><span class="glyphicon {{item.icon}}">{{item.name}}</span></span></div></div></td></tr><tr><td>&nbsp;</td><td><div class="col-xs-6"><button type="submit" class="btn btn-block btn-success btn-md" ng-click="add(addForm)">保存</button></div><div class="col-xs-6"><button type="reset" class="btn btn-block btn-default btn-md" ng-click="reset()">重置</button></div></td></tr></table></div></form></div><div class="block-title"></div>'),t.put("app/modules/subjects/list.html",'<div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>{{title}}</h5></div><div class="bs-callout"><div class="mt-10"><div class="form-group row"><div class="col-xs-4"><a class="btn-block btn btn-info" ui-sref="home.subCreate">发布专题</a></div></div></div><div class="block mt-10"><a ng-click="filterByStatus(\'all\');" ng-class="{\'btn-info\': status == \'all\'}" class="btn">全部 <span class="badge">{{total[4]}}</span></a> <a ng-click="filterByStatus(\'1\');" ng-class="{\'btn-info\': status == \'1\'}" class="btn">已上线 <span class="badge">{{total[2]}}</span></a> <a ng-click="filterByStatus(\'2\');" ng-class="{\'btn-info\': status == \'2\'}" class="btn">已下线 <span class="badge">{{total[2]}}</span></a></div><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><div class="input-group"><div class="input-group-addon">关键词</div><input type="text" ng-model="key" class="form-control" placeholder="请输入专题名称"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search();">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="reset();">重置</button></div></form></div></div><div class="table-responsive" style="margin-top:10px;"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"></colgroup><thead><tr><td><h5><em class="text-danger">专题id</em></h5></td><td class="text-center"><h5>专题名称</h5></td><td class="text-center"><h5>专题类型</h5></td><td class="text-center"><h5>图片</h5></td><td class="text-center"><h5>专题状态</h5></td><td class="text-center"><h5>所属站点</h5></td><td class="text-center"><h5>所属城市</h5></td><td class="text-center"><h5>开始时间</h5></td><td class="text-center"><h5>结束时间</h5></td><td class="text-center"><h5>更新时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody><tr ng-repeat="item in advs"><td><h5><em class="text-danger">{{item.id}}</em></h5></td><td class="text-center"><h5>{{item.title}}</h5></td><td class="text-center"><h5>{{item.subject_type_cn}}</h5></td><td class="text-center"><h5 ng-if="item.pic_url"><img ng-src="http://chart.apis.google.com/chart?cht=qr&amp;chs=300x300&amp;choe=UTF-8&amp;chld=M|1&amp;chl=chu.dachuwang.com/subject/{{item.id}}" class="thumbnail" width="150"></h5></td><td class="text-center"><h5><span class="label label-default" ng-if="item.status == 2">待上线</span> <span class="label label-success" ng-if="item.status == 1">已上线</span> <span class="label label-danger" ng-if="item.status == 0">已下线</span></h5></td><td class="text-center"><h5>{{item.site_cn}}</h5></td><td class="text-center"><h5>{{item.location_cn}}</h5></td><td class="text-center"><h5>{{item.online_time_cn}}</h5></td><td class="text-center"><h5>{{item.offline_time_cn}}</h5></td><td class="text-center"><h5>{{item.updated_time}}</h5></td><td class="text-center"><h5><a ng-if="item.status == 1" class="btn btn-danger btn-sm btn_mb5" ng-click="setStatus(item, 0)">下线</a> <a ng-if="item.status != 1" class="btn btn-success btn-sm btn_mb5" ng-click="setStatus(item, 1)">上线</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div>'),t.put("app/modules/subjects/tips.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <div class="row form-horizontal"> <div class="col-xs-12 form-group"> <select ng-model="selectCity" ng-change="items.cityChange(selectCity)" class="form-control" ng-options="item.name for item in items.bodyText"> <option value="">请选择所在城市</option> </select> </div> <div class="col-xs-12 form-group"> <select ng-model="selectMarket" class="form-control" ng-options="item.name for item in items.markets"> <option value="">请选择所在市场</option> </select> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok(selectCity, selectMarket);cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="cancel()">{{items.closeText}}</button> </div></script>'),t.put("app/modules/user/create.html",'<div class="container-fluid" ng-controller="UserCreateCtrl"><div class="width_change" id="row block-title"><div class="col-sm-offset-2 col-sm-10 col-xs-12"><div class="bs-callout bs-callout-danger"><h5>添加用户</h5></div><div class="form-group" ng-show="basic_form.$invalid && basic_form.$dirty && show_error"><div class="col-sm-12"><div class="alert alert-danger"><ul><li ng-show="basic_form.dept.$error.required">请选择部门！</li><li ng-show="basic_form.role.$error.required">请选择用户角色！</li><li ng-show="basic_form.mobile.$error.required">请输入手机号码！</li><li ng-show="basic_form.mobile.$error.pattern">手机号码格式不对！</li><li ng-show="basic_form.name.$error.required">请输入用户姓名！</li><li ng-show="basic_form.province.$error.required">请选择所在地！</li></ul></div></div></div><div class="block mt-10 ml-default"><form class="form-horizontal showcase-form" role="form" id="basic_form" name="basic_form"><div class="form-group"><label class="col-sm-2 control-label">所属部门：</label><div class="col-sm-10"><select ng-model="data.dept" class="form-control" name="dept" ng-options="m.pre_name for m in dept_list" required=""><option value="">请选择用户所属部门</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">用户角色：</label><div class="col-sm-10"><select ng-model="data.role" class="form-control" name="role" ng-options="m.name for m in role_list" required=""><option value="">请选择用户角色类型</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">手机号：</label><div class="col-sm-10"><input type="text" ng-model="data.mobile" name="mobile" class="form-control" placeholder="请输入手机号码" required="" ng-pattern="/^[1-9]{1}[0-9]{10}$/"></div></div><div class="form-group"><label class="col-sm-2 control-label">姓名：</label><div class="col-sm-10"><input type="text" name="name" ng-model="data.name" class="form-control" placeholder="请输入姓名" required=""></div></div><div class="form-group"><label class="col-sm-2 control-label">所在地：</label><div class="col-sm-10"><select ng-model="data.province" class="form-control" name="province" ng-options="m.name for m in province_list" ng-change="get_market(\'province\');" required=""><option value="">选择省份</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">详细地址：</label><div class="col-sm-10"><input type="text" ng-model="data.address" class="form-control" placeholder="请输入详细地址"></div></div><div class="form-group"><button class="btn btn-info btn-lg col-sm-3 col-sm-offset-1" ng-click="create();">提交</button> <button class="btn btn-warning btn-lg col-sm-3 col-sm-offset-1" ng-click="reset()">重置</button></div></form></div></div></div></div>'),t.put("app/modules/user/edit.html",'<div class="container-fluid"><div class="width_change" id="row block-title"><div class="col-sm-offset-2 col-sm-10 col-xs-12"><div class="bs-callout bs-callout-danger"><h5>编辑用户</h5></div><div class="form-group" ng-show="basic_form.$invalid && basic_form.$dirty && show_error"><div class="col-sm-12"><div class="alert alert-danger"><ul><li ng-show="basic_form.dept.$error.required">请选择部门！</li><li ng-show="basic_form.role.$error.required">请选择用户角色！</li><li ng-show="basic_form.mobile.$error.required">请输入手机号码！</li><li ng-show="basic_form.mobile.$error.pattern">手机号码格式不对！</li><li ng-show="basic_form.name.$error.required">请输入用户姓名！</li><li ng-show="basic_form.province.$error.required">请选择所在地！</li></ul></div></div></div><div class="block mt-10 ml-default"><form class="form-horizontal showcase-form" role="form" id="basic_form" name="basic_form"><div class="form-group"><label class="col-sm-2 control-label">所属部门：</label><div class="col-sm-10"><select ng-model="data.dept" class="form-control" name="dept" ng-options="m.pre_name for m in dept_list" required=""><option value="">请选择用户所属部门</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">用户角色：</label><div class="col-sm-10"><select ng-model="data.role" class="form-control" name="role" ng-options="m.name for m in role_list" required=""><option value="">请选择用户角色类型</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">手机号：</label><div class="col-sm-10"><input type="text" ng-model="data.mobile" name="mobile" class="form-control" placeholder="请输入手机号码" required="" ng-pattern="/^[1-9]{1}[0-9]{10}$/"></div></div><div class="form-group"><label class="col-sm-2 control-label">姓名：</label><div class="col-sm-10"><input type="text" name="name" ng-model="data.name" class="form-control" placeholder="请输入姓名" required=""></div></div><div class="form-group"><label class="col-sm-2 control-label">所在地：</label><div class="col-sm-10"><select ng-model="data.province" class="form-control" name="province" ng-options="m.name for m in province_list" ng-change="get_market(\'province\');" required=""><option value="">选择省份</option></select></div></div><div class="form-group"><label class="col-sm-2 control-label">详细地址：</label><div class="col-sm-10"><input type="text" ng-model="data.address" class="form-control" placeholder="请输入详细地址"></div></div><div class="form-group"><button class="btn btn-info btn-lg col-sm-3 col-sm-offset-1" ng-click="edit();">提交</button> <button class="btn btn-warning btn-lg col-sm-3 col-sm-offset-1" ng-click="reset()">重置</button></div></form></div></div></div></div>'),t.put("app/modules/user/list.html",'<div class="container-fluid" ng-controller="UserListCtrl"><div class="width_change" id="row block-title"><div class="col-xs-offset-2"><div class="bs-callout bs-callout-danger"><h5>用户列表</h5></div><div class="bs-callout"><div class="block mt-10 ml-default"><form class="form-inline" role="form"><div class="form-group"><select ng-model="role" class="form-control" name="role" ng-options="m.name for m in role_list"><option value="">请选择角色类型</option></select></div><div class="form-group"><div class="input-group"><input type="text" ng-model="searchValue" class="form-control" placeholder="请输入搜索关键词"><div class="input-group-addon">起始时间</div><input type="text" is-open="opened" datepicker-popup="yyyy-MM-dd" ng-click="open($event)" datepicker-options="dateOptions" class="form-control" ng-model="startTime" id="startTime" placeholder="点击获取时间"></div></div><div class="form-group"><div class="input-group"><div class="input-group-addon">截止时间</div><input type="text" ng-model="endTime" class="form-control" datepicker-popup="yyyy-MM-dd" datepicker-options="endDateOptions" ng-click="endOpen($event)" is-open="endOpened" id="endTime" placeholder="点击获取时间"></div></div><div class="form-group"><button class="btn-block btn btn-info" ng-click="search();">筛选</button></div><div class="form-group"><button class="btn btn-block btn-warning" ng-click="reset()">重置</button></div><div class="form-group"><button class="btn btn-block btn-primary" ng-click="exportData()">导出数据</button></div><div class="form-group"><a class="btn btn-primary btn-sm" href="/user/create">添加用户</a></div></form></div></div><div style="margin-top:10px;" class="table-responsive"><table class="table table-bordered table-striped table-hover"><colgroup><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-1"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-2"><col class="col-xs-3"></colgroup><thead><tr><td class="text-center"><h5>编号</h5></td><td class="text-center"><h5>姓名</h5></td><td class="text-center"><h5>角色</h5></td><td class="text-center"><h5>手机号</h5></td><td class="text-center"><h5>注册时间</h5></td><td class="text-center"><h5>操作</h5></td></tr></thead><tbody ng-if="list.length===0"><tr><td colspan="8" class="text-center"><h5>暂无数据</h5></td></tr></tbody><tbody ng-if="list.length>0"><tr ng-repeat="item in list"><td class="text-center"><h5>{{item.id}}</h5></td><td class="text-center"><h5>{{item.name}}</h5></td><td class="text-center"><h5>{{item.role}}</h5></td><td class="text-center"><h5>{{item.mobile}}</h5></td><td class="text-center"><h5>{{item.created_time}}</h5></td><td class="text-center"><h5><a class="btn btn-info btn-sm btn_mb5" href="/user/edit/{{item.id}}">编辑用户</a> <a class="btn btn-danger btn-sm btn_mb5" ng-click="setStatus($index, 0)" ng-if="item.status == 1">禁用账号</a> <a class="btn btn-success btn-sm btn_mb5" ng-click="setStatus($index, 1)" ng-if="item.status == 0">启用账号</a> <a class="btn btn-info btn-sm btn_mb5" ng-click="resetPassword($index)">重置密码</a></h5></td></tr></tbody></table></div><nav><dachu-pagination conf="paginationConf"></dachu-pagination></nav></div></div></div>'),t.put("app/modules/user/login.html",'<div class="container-fluid"><div ng-include="\'components/navbar/navbar.html\'" ng-init="isLogin=\'false\'"></div><div class="row login_b show-grid"><div class="col-md-12 col-xs-12"><div class="clogin col-md-4 col-md-offset-4"><h3 class="clogin_h3" ng-controller="TopCtrl">{{title}}</h3><p ng-show="error" class="{{error.cls}}">{{error.msg}}</p><form class="row block block-col form-horizontal" name="loginForm" role="form" novalidate="" ng-submit="login()"><div class="form-group c_loginb col-xs-12"><div class="col-sm-12"><input type="tel" required="" class="input-lg form-control" ng-model="user.mobile" ng-pattern="/^1[3|5|6|7|8|9]\\d{9}$/" ng-minlength="11" ng-maxlength="11" name="mobile" id="tel" placeholder="请输入手机号"><div class="col-xs-12 block-col label label-danger" ng-show="(loginForm.submitted || loginForm.mobile.$dirty) && loginForm.mobile.$invalid"><small ng-show="loginForm.mobile.$error.minlength">请输入正确的手机号</small> <small ng-show="!loginForm.mobile.$error.minlength && loginForm.mobile.$error.pattern">手机号格式不正确</small> <small ng-show="loginForm.mobile.$error.required">手机号必填</small></div></div></div><div class="form-group c_loginb col-xs-12"><div class="col-sm-12"><input type="password" required="" class="input-lg form-control" ng-minlength="6" ng-model="user.password" name="password" id="password" placeholder="请输入密码"><div class="col-xs-12 block-col label label-danger" ng-show="loginForm.submitted && loginForm.password.$invalid"><small ng-show="loginForm.password.$error.minlength">密码至少6位</small> <small ng-show="loginForm.password.$error.required">密码必填</small></div></div></div><div class="form-group col-xs-12"><div class="col-sm-12"><button type="submit" class="btn btn-success btn-block">登录</button></div></div></form></div></div></div></div>')
}]);