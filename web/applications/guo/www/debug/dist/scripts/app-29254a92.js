"use strict";angular.module("dachuwang",["ngCookies","ngTouch","ngSanitize","ui.router","bootstrapLightbox","ui.bootstrap"]).run(["$rootScope","$state","$templateCache",function(t,e,a){t.$on("$stateChangeStart",function(){t.showLoading=!0}),t.$on("$stateChangeSuccess",function(){t.showLoading=!1,t.$emit("pageChanged",e.current.data)}),a.put("lightbox.html","<div class=modal-body ng-swipe-left=Lightbox.nextImage() ng-swipe-right=Lightbox.prevImage()><div class='close_m_btn' ng-click='Lightbox.closeModal()'><span class='glyphicon glyphicon-remove'></span></div><div class=lightbox-image-container><span class='glyphicon glyphicon-menu-left' ng-show='lightBox_len > 1'  ng-click=Lightbox.nextImage()></span><span class='glyphicon glyphicon-menu-right'   ng-show='lightBox_len > 1' ng-click=Lightbox.prevImage()></span><div class=lightbox-image-caption><span>{{Lightbox.imageCaption}}</span></div><img lightbox-src={{Lightbox.imageUrl}} class='' alt=\"\"></div></div></div>")}]),angular.module("dachuwang").controller("UserEditCtrl",["$scope","req","$cookieStore","daChuDialog",function(t,e,a,i){if(void 0==a.get("token"))return e.redirect("/user/login"),!1;t.discard=function(){e.redirect("/user/center")},t.addr={province:"",city:"",county:"",market:""},t.reg={provinceId:"",name:"",cityId:"",countyId:"",marketId:"",detailAddress:""},t.normalUser=30==t.reg.type||20==t.reg.type?1:0,e.getdata("user/getinfo","POST",function(e){t.reg.detailAddress=e.info.detail_address,t.reg.name=e.info.name,t.markets=e.markets,t.provinces=e.provinces,t.citys=e.citys,t.countys=e.countys,angular.forEach(t.markets,function(a){a.id==e.info.market_id&&(t.addr.market=a)}),angular.forEach(t.provinces,function(a){a.id==e.info.province_id&&(t.addr.province=a)}),angular.forEach(t.citys,function(a){a.id==e.info.city_id&&(t.addr.city=a)}),null!=e.info.county_id&&angular.forEach(t.countys,function(a){a.id==e.info.county_id&&(t.addr.county=a)})}),localStorage.getItem("provinces")?t.provinces=JSON.parse(localStorage.getItem("provinces")):e.getdata("location/","GET",function(e){t.provinces=e.provinces,localStorage.setItem("provinces",JSON.stringify(e.provinces))}),t.get_child=function(a,i){e.getdata("location/children","POST",function(e){t[a]=e.children},{id:t.addr[i].id})};var s=0;t.get_market=function(a){(a="province")?t.addr.province.id<=4?(s=1,e.getdata("market/get_market","POST",function(e){t.markets=e},{type:"province",id:t.addr.province.id})):s=0:s||e.getdata("market/get_market","POST",function(e){t.markets=e},{type:"city",id:t.addr.city.id})},t.save=function(){t.reg.marketId=t.addr.market.id,t.reg.provinceId=t.addr.province.id,t.reg.cityId=t.addr.city.id,t.reg.countyId=t.addr.county.id,e.getdata("/user/update_myself","POST",function(t){t.status?(i.tips({bodyText:"更新个人资料成功！"}),e.redirect("/user/center")):i.tips({bodyText:"更新个人资料失败。"})},t.reg)}}]),angular.module("dachuwang").controller("UserRegisterCtrl",["$scope","req","$cacheFactory","$timeout","$location","daChuDialog","$cookieStore","daChuLocal","daChuTimer",function(t,e,a,i,s,o,n,r,l){t.dialog=o.tips,t.addr={province:"",city:"",county:"",market:"",userType:""},t.reg={mobile:"",password:"",name:"",provinceId:"",cityId:"",countyId:"",marketId:"",detailAddress:"",type:"",vcode:"",inviteid:n.get("username")},r.get("regUserType")&&l.compare(r.get("regUserTypeTime"))?t.types=r.get("regUserType"):e.getdata("user/user_type","POST",function(e){t.types=e.user_type,r.set("regUserType",e.user_type),r.set("regUserTypeTime",l.getNow())}),e.getdata("user/register_options","GET",function(e){t.cities=e.list.cities,t.market=e.list.market}),t.getMarket=function(){t.markets=void 0!=t.addr.city?t.market[t.addr.city.id]:[]},t.sms=function(){if(""==t.reg.mobile)return t.dialog({bodyText:"请输入手机号后再选择发送验证短信!"}),!1;t.clock=60;var a=function(e){t.smsinfo="点此重发验证码",t.smsdis="",clearInterval(e)},i=function(){t.clock>=1?(t.clock--,t.smsinfo=t.clock+"秒后可以重发",t.smsdis="disabled"):a(s)},s=setInterval(function(){t.$apply(i)},1e3);e.getdata("user/smscode","POST",function(e){0===e.status?t.dialog({bodyText:"已经成功发送短信,请您注意查收。"}):(a(s),t.dialog({bodyText:"发送短信失败,请您检查手机号是否可用。"}))},t.reg)},t.register=function(){return t.regForm.$invalid?(t.regForm.submitted=!0,!1):(t.reg.provinceId=t.addr.province.id,t.reg.cityId=t.addr.city.id,t.reg.countyId=t.addr.county.id,t.reg.marketId=t.addr.market.id,t.reg.type=t.addr.userType.type,t.reg.codeInviteId=n.get("inviteId"),t.reg.codeInviteStoreNumber=n.get("inviteStoreNumber"),void e.getdata("user/register","POST",function(a){var i="恭喜您注册成功";0===a.status?(20==t.reg.type?n.put("type",20):i="恭喜您注册成功，请等待大果网审核。有任何疑问请联系400-8199-491。",t.dialog({bodyText:i,actionText:"确定",ok:function(){e.redirect(20==t.reg.type?"/user/center":"/")},closeText:"首页",close:function(){e.redirect("/")}})):t.dialog({bodyText:a.message})},t.reg))}}]),angular.module("dachuwang").controller("UserPasswordController",["$scope","req","$cacheFactory","$timeout","$location","daChuDialog","$cookieStore",function(t,e,a,i,s,o,n){t.reg={password:"",newPassword:"",newRePassword:""},t.dialog=o.tips,t.changePassword=function(){return t.show_error=!0,t.passwordForm.$invalid?void 0:t.reg.newPassword!=t.reg.newRePassword?void t.dialog({bodyText:"两次输入密码不一致。"}):void e.getdata("customer/change_password","POST",function(a){0===a.status?(t.dialog({bodyText:a.msg}),e.getdata("customer/logout","POST",function(){n.remove("token"),e.redirect("/user/login")})):t.dialog({bodyText:a.msg})},t.reg)}}]),angular.module("dachuwang").controller("UserLoginController",["$scope","$state","userAuthService","rpc","$cookieStore","daChuLocal","daChuDialog",function(t,e,a,i,s,o,n){return a.isLogined()?(i.redirect("/user/center"),!1):(t.user={mobile:"",password:""},t.message={text:"",status:""},t.login=function(){return t.loginForm.$invalid?(t.loginForm.submitted=!0,!1):void i.load("customer/login","POST",t.user).then(function(t){o.set("token",t.token),o.remove("packaged_cate"),i.redirect(i.refer&&"/"!=i.refer?i.refer:"user/center")},function(e){t.error={cls:"alert alert-danger",message:e}})},void(t.showTips=function(){n.tips({bodyText:"您可以通过大果网官方客服电话：400-8199-491、官方QQ：975550226、大果网官方微信号提出申请，稍后我们会有专员前往考察，通过后，会邀请您注册成为大果网用户，即可轻松下单，享受新鲜食材快速送达！",telText:"立即拨打",tel:"400-8199-491"})}))}]),angular.module("dachuwang").controller("couponController",["$rootScope","$scope","req","$cookieStore","daChuDialog","$filter","userAuthService","daChuLocal","coupon","userService",function(t,e,a,i,s,o,n,r,l,c){t.showLoading=!0;var d=function(e){l.query(function(a){a.list&&1==e&&(l.valid_load=!0),a.list&&0==e&&(l.no_valid_load=!0),t.showLoading=!1,0==a.status&&(l.list=a.list,angular.forEach(l.list,function(t){(1==t.status||2==t.status)&&l.ucenterList.active_data.push(t),(3==t.status||4==t.status)&&l.ucenterList.inactive_data.push(t)}))},{status:e})};n.checkLogin(),e.dialog=s.tips,e.active=function(){e.current=!1,l.valid_load||d(1)},e.no_active=function(){e.current=!0,l.no_valid_load||d(0)},l.ucenterList.active_data.length||(e.active(),l.no_valid_load||d(0),t.showLoading=!1,e.coupon=l),e.coupon=l,t.showLoading=!1,e.logout=function(){e.dialog({bodyText:"确定要退出吗？",ok:function(){c.login_out()},actionText:"确定",closeText:"取消"})}}]),angular.module("dachuwang").controller("chooseController",["$scope","$rootScope","req","$cookieStore","daChuDialog","$filter","userAuthService","daChuLocal","coupon",function(t,e,a,i,s,o,n,r,l){var c=r.get("coupon_active");t.coupon=c,e.showLoading=!1,t.choose_sum=function(t){l.choose_sum=t.detail.minus_amount,l.coupon_id=t.id,a.redirect("/confirm")},n.checkLogin(),t.dialog=s.tips,t.active=function(){t.current=!1},t.no_active=function(){t.current=!0},t.logout=function(){t.dialog({bodyText:"确定要退出吗？",ok:function(){userService.login_out()},actionText:"确定",closeText:"取消"})}}]),angular.module("dachuwang").controller("UserCenterCtrl",["$scope","$rootScope","req","userService","$cookieStore","daChuDialog","$filter","userAuthService","daChuLocal",function(t,e,a,i,s,o,n,r){e.showLoading=!0,r.checkLogin(),t.dialog=o.tips,t.logout=function(){t.dialog({bodyText:"确定要退出吗？",ok:function(){i.login_out()},actionText:"确定",closeText:"取消"})};var l=function(a){t.uinfo=a.info,e.showLoading=!1,t.valid_coupon_nums=a.valid_coupon_nums,t.order=a.order};a.getdata("customer/baseinfo","POST",l)}]),angular.module("dachuwang").controller("subjectController",["$window","$scope","$stateParams","productService","categoryService","cartlist","Lightbox","rpc",function(t,e,a,i,s,o,n,r){e.ifnone_products=!1,e.show_loading=!0,e.backUpNum={},e.getProduct=function(){var t=r.load("subject/info","POST",{id:a.subjectId});t.then(function(t){e.show_loading=!1,e.info=t.info,e.products=t.info.products,angular.forEach(e.products,function(t){t.quantity=1,o.items[0]&&angular.forEach(o.items[0].list,function(e){t.id==e.id&&(t.quantity=e.quantity)})})},function(){},function(){})},e.list_tips="",e.minus=function(t){1!=t.quantity&&t.quantity--},e.plus=function(t){return-1!=t.storage&&t.storage<=t.quantity?(alert("抱歉库存不足"),void(t.quantity=parseInt(t.storage))):0!=t.buy_limit&&t.buy_limit==t.quantity?void alert("每人只能购买"+t.buy_limit+t.unit):void(t.quantity>=9999||t.quantity++)},e.getProduct(11,1),e.cartlist=o,e.isdisabled=!0,e.toggleItems=function(t,e){return-1!=t.storage&&t.storage<t.quantity?(alert("抱歉库存不足"),void(t.quantity=parseInt(t.storage))):void(o.ids.indexOf(t.id)>=0?(o.changeItem(t,-1,0),t.quantity=e):o.changeItem(t,1,e))},e.clearNum=function(t){e.backUpNum[t.id]=t.quantity,t.quantity=""},e.setNum=function(t,a){return 0!=t.buy_limit&&t.quantity>t.buy_limit&&(t.quantity=parseInt(t.buy_limit)),a=a?a:!1,a&&""===t.quantity&&e.backUpNum[t.id]?(t.quantity=e.backUpNum[t.id],void(e.backUpNum[t.id]="")):void(null!=t.quantity&&t.quantity<=0?t.quantity=1:(null!=t.quantity||a)&&(t.quantity<=1?t.quantity=1:/^\d+$/.test(t.quantity)||(t.quantity=1)))},e.lightBox=function(t){angular.forEach(t,function(t){t.url=t.pic_url}),n.openModal(t,0)}}]),angular.module("dachuwang").controller("orderListController",["$scope","req","$cookieStore","$modal","$window","pagination","userAuthService","$stateParams",function(t,e,a,i,s,o,n,r){n.checkLogin(),t.dialog=function(t,e){var a={headerText:"提示信息",bodyText:"设置成功",closeText:"关闭"},s={templateUrl:"myModalContent.html"};angular.extend(s,e),angular.extend(a,t);var o=i.open({templateUrl:s.templateUrl,controller:"ModalInstanceCtrl",resolve:{items:function(){return a}}});o.result.then(function(){},function(){})},t.orderlist=[],t.showType=r.status||2,t.tabs=[{status:2,name:"待确认"},{status:100,name:"待收货"},{status:1,name:"已完成"},{status:0,name:"已关闭"}];var l=function(a){0===a.status&&(t.orderlist=a.orderlist,t.user_type=a.type,t.total=a.total),t.pagination=o,o.init(function(a){e.getdata("order/lists","POST",function(e){angular.forEach(e.orderlist,function(e){t.orderlist.push(e)}),a&&a(!e.orderlist.length)},{page:o.page,status:t.showType})})};e.getdata("order/lists","POST",l,{status:t.showType}),t.setStatus=function(a){r=a,t.showType=a,e.getdata("order/lists","POST",l,{status:t.showType})},t.setStatus(t.showType);var c=function(e){t.dialog(0===e.status?{bodyText:"取消订单成功",close:function(){s.location.reload()}}:{bodyText:"取消失败"})};t.cancel=function(e){t.dialog({bodyText:"确认取消订单吗？",action:"confirm",ok:function(){t.orderCancel(e)},actionText:"确认",closeText:"取消"})},t.orderCancel=function(t){e.getdata("order/cancel","POST",c,{order_id:t})}}]),angular.module("dachuwang").controller("orderController",["$scope","cartlist",function(t,e){t.text="this is order page",t.products=e.items[0].list,t.minus=function(a){1==a.quantity?t.remove(a):e.changeItem(a,-1)},t.plus=function(t){e.changeItem(t,1)},t.remove=function(a){t.dialog({bodyText:"确定要删除吗?",actionText:"确定",ok:function(){e.changeItem(a,-1,0)}})},t.backUpNum={},t.clearNum=function(e){t.backUpNum[e.id]=e.quantity,e.quantity=""},t.setNum=function(a,i){i=i?i:!1,i&&""===a.quantity&&t.backUpNum[a.id]&&(a.quantity=t.backUpNum[a.id],t.backUpNum[a.id]=""),null!=a.quantity&&a.quantity<=0?a.quantity=0:(null!=a.quantity||i)&&(a.quantity<=0?t.remove(a):/^\d+$/.test(a.quantity)?e.changeItem(a,1,a.quantity):a.quantity=1)}}]),angular.module("dachuwang").controller("listController",["$scope","$cookieStore","cartlist","req","daChuDialog",function(t,e,a,i,s){t.cartlist=a,t.dialog=s.tips;var o=function(t){t.status&&(a.clearInfo(),i.redirect("/order/list"))};t.init={startHour:0,dt:0,content:""},t.dates=[];var n=new Date,r={name:"今天",val:"today"},l={name:"明天",val:"tomorrow"};t.dates.push(r),t.dates.push(l),t.init.dt=t.dates[0],t.hours=[];for(var c=0;24>c;c++){var d={name:c+"点",val:c};t.hours.push(d)}var n=new Date,u=n.getHours();t.init.startHour=t.hours[u],t.hourChange=function(){return!1},t.confirm=function(){var s=e.get("type");if(!s)return i.redirect("/user/login","cart/detail"),!1;var n=[];angular.forEach(a.users,function(e){angular.forEach(a.items[e].list,function(e){e.quantity<=0?t.remove(e,!0):n.push({id:e.id,quantity:e.quantity})})}),i.getdata("order/add","POST",o,{total_price:a.sum,products:n,mindate:t.init.dt,content:t.init.content,minhour:t.init.startHour})},t.minus=function(e){1==e.quantity?t.remove(e):a.changeItem(e,-1)},t.plus=function(t){a.changeItem(t,1)},t.remove=function(e){t.dialog({bodyText:"确定要删除吗?",actionText:"确定",ok:function(){a.changeItem(e,-1,0)}})},t.backUpNum={},t.clearNum=function(e){t.backUpNum[e.id]=e.quantity,e.quantity=""},t.setNum=function(e,i){i=i?i:!1,i&&""===e.quantity&&t.backUpNum[e.id]&&(e.quantity=t.backUpNum[e.id],t.backUpNum[e.id]=""),null!=e.quantity&&e.quantity<=0?e.quantity=0:(null!=e.quantity||i)&&(e.quantity<=0?t.remove(e):/^\d+$/.test(e.quantity)?a.changeItem(e,1,e.quantity):e.quantity=1)}}]),angular.module("dachuwang").controller("ProductCateCtrl",["$scope","$element","$cookieStore","$location","$interval","req","daChuDialog","pagination","daChuLocal","daChuTimer","cartlist",function(t,e,a,i,s,o,n,r,l,c,d){t.local=l,t.items=[],t.cartlist=d;var u=a.get("type");if(void 0==u&&(u=-1),t.style=u,t.addItems=function(t){d.ids.indexOf(t.id)>=0?d.changeItem(t,-1,0):d.changeItem(t)},t.cateIndex=0,t.doc=document.documentElement,t.menubar={itemWidth:[],totalWidth:0,left:0,prev:0,setLeft:function(e){if(e>1){var a=0,i=this;angular.forEach(t.cates,function(s,o){e-1>o&&i.totalWidth-a>t.doc.clientWidth?a+=t.menubar.itemWidth[o]:o==e-1&&(a+=parseInt(t.menubar.itemWidth[o]/4))}),t.menubar.left=-a}else 1>=e&&(t.menubar.left=0);this.prev=e},init:function(){angular.forEach(t.cates,function(e,a){t.menubar.itemWidth[a]=23*e.name.length+20,t.menubar.totalWidth+=t.menubar.itemWidth[a]})}},t.pagination=r,t.getProduct=function(e){t.showCate=!1;var a=l.get("cityId"),i=l.get("marketId"),s=l.get("page_"+e+"_"+i),n=l.get("product_"+e+"_"+i),d=l.get("local_address"),u=l.get("product_"+e+"_time_"+i),p="product/lists/";p+=a||1,i&&(p+="/"+i),t.productCateId=e;var g=l.get("path")||"",m=0;g&&(angular.forEach(t.childCates,function(t,e){-1!==g.indexOf(t.path)&&(m=e)}),t.childId=t.childCates[m].id),n&&c.compare(u)?(t.items=n,s&&(r.page=parseInt(s))):(t.items=[],t.address="",r.page=0),d&&c.compare(u)&&(t.address=d),r.init(function(a){o.getdata(p,"POST",function(s){l.set("local_address",s.info.address),t.address=s.info.address,angular.forEach(s.list,function(e){t.items.push(e)}),a&&(a(!s.list.length),s.list.length&&(l.set("product_"+e+"_"+i,t.items),l.set("page_"+e+"_"+i,r.page),l.set("product_"+e+"_time_"+i,c.getNow())),0==t.items.length&&(t.text="暂无此类货物"))},{page:r.page,upid:e})}),n&&c.compare(u)?s&&(r.page=parseInt(s)):r.page=0,r.nextPage()},t.changeIndex=function(e){t.cates[t.cateIndex+e]&&(t.cateIndex=t.cateIndex+e,t.getChild(t.cateIndex))},t.setDefault=function(e){if(t.cates=e.top,t.child=e.child,t.secondCate=e.second,t.secondCateChild=e.second_child,t.menubar.init(),t.cates&&t.cates.length>0){var a=l.get("path")||"",i=0;a&&angular.forEach(t.cates,function(t,e){-1!==a.indexOf(t.path)&&(i=e)}),t.cates[i].cls="active",t.getChild(i)}},t.getChild=function(e){t.topId=t.cates[e].id,t.cateIndex=e,t.menubar.setLeft(e),t.childCates=t.secondCate[t.topId];var a=l.get("path")||"",i=0;a&&angular.forEach(t.childCates,function(t,e){-1!==a.indexOf(t.path)&&(i=e)}),t.childId=t.childCates[i].id,t.childLength=t.childCates.length,1==t.childCates.length&&(t.childCates=t.child[t.topId]),t.getThird(i)},t.getThird=function(e){t.childCates[e]&&(l.set("path",t.childCates[e].path),t.secondId=t.childCates[e].id,t.showCate=t.childLength>1?!0:!1,t.showCate?t.items=t.secondCateChild[t.secondId]:t.getProduct(t.secondId),t.childId=t.childCates[e].id)},"/"===i.$$path||0===i.$$path.indexOf("/product/lists")){var p=l.get("cateList"),g=l.get("cateListTime");p&&c.compare(g)?(r.isProcessing=!1,t.setDefault(p)):o.getdata("category/lists","GET",function(e){t.local.set("cateList",e.list),t.local.set("cateListTime",c.getNow()),t.setDefault(e.list)})}t.citySelect=function(){o.getdata("user/register_options","GET",function(e){var a=e.list.cities,i=e.list.market;n.tips({headerText:"选择市场",bodyText:a,markets:[],cityChange:function(t){this.markets=i[t.id]},actionText:"确定",ok:function(e,a){if(e){var i=e.id,s=0;(null==a||void 0===a)&&(a=this.markets[0]),s=a.id,l.set("marketId",s),l.set("cityId",i),l.set("cityMarketTime",c.getNow())}l.set("product_"+t.childId,""),l.set("local_address",e.name+" "+a.name),t.getProduct(t.productCateId)},closeText:"取消"})})}}]),angular.module("dachuwang").controller("padController",["$rootScope","$window","$scope","$stateParams","productService","categoryService","cartlist","Lightbox",function(t,e,a,i,s,o,n,r){a.ifnone_products=!1,a.show_loading=!0,a.backUpNum={},a.getProduct=function(t,e){var i=s.getProducts(t,e);i.then(function(t){a.show_loading=!1,a.products=t,angular.forEach(a.products,function(t){t.quantity=1,n.items[0]&&angular.forEach(n.items[0].list,function(e){t.id==e.id&&(t.quantity=e.quantity)})}),a.ifnone_products=t.length>0?!1:!0},function(){},function(){})},a.list_tips="",a.minus=function(t){1!=t.quantity&&t.quantity--},a.plus=function(t){return-1!=t.storage&&t.storage<=t.quantity?(alert("抱歉库存不足"),void(t.quantity=parseInt(t.storage))):0!=t.buy_limit&&t.buy_limit==t.quantity?void alert("每人只能购买"+t.buy_limit+t.unit):void(t.quantity>=9999||t.quantity++)},a.getProduct(i.cateId,1),a.cartlist=n,a.isdisabled=!0,a.toggleItems=function(t,e){return-1!=t.storage&&t.storage<t.quantity?(alert("抱歉库存不足"),void(t.quantity=parseInt(t.storage))):void(n.ids.indexOf(t.id)>=0?(n.changeItem(t,-1,0),t.quantity=e):n.changeItem(t,1,e))},a.clearNum=function(t){a.backUpNum[t.id]=t.quantity,t.quantity=""},a.setNum=function(t,e){return 0!=t.buy_limit&&t.quantity>t.buy_limit&&(t.quantity=parseInt(t.buy_limit)),e=e?e:!1,e&&""===t.quantity&&a.backUpNum[t.id]?(t.quantity=a.backUpNum[t.id],void(a.backUpNum[t.id]="")):void(null!=t.quantity&&t.quantity<=0?t.quantity=1:(null!=t.quantity||e)&&(t.quantity<=1?t.quantity=1:/^\d+$/.test(t.quantity)||(t.quantity=1)))},a.lightBox=function(e){angular.forEach(e,function(t){t.url=t.pic_url}),t.lightBox_len=e.length,r.openModal(e,0)}}]),angular.module("dachuwang").controller("homeController",["$scope","$http","$window","locationService","notifyService","categoryService","cateObj","daChuLocal","advService","userAuthService","req","Lightbox",function(t,e,a,i,s,o,n,r,l,c,d,u){u.modalInstance&&u.closeModal(),r.get("token")||d.getdata("customer/logout","POST",function(){r.remove("packaged_cate"),r.remove("coupon_active")}),t.category=n,t.showAdv=!1,l.getAds(1).then(function(e){t.slides=[],0===parseInt(e.status)&&(angular.forEach(e.list,function(e){var a={sref:e.link_url,url:e.pic_url};t.slides.push(a)}),t.slides.length&&(t.showAdv=!0))},function(){t.slides=[]})}]),angular.module("dachuwang").controller("confirmController",["$scope","$rootScope","$cookieStore","$window","cartlist","req","daChuDialog","userAuthService","coupon","daChuLocal",function(t,e,a,i,s,o,n,r,l,c){function d(){var e=new Date,a=e.getHours(),s=Math.floor(e.getTime()/1e3);return 23===a&&t.deliver_date.val-s<=86400?(i.alert("抱歉，23点后最早只能选择后天配送"),!1):!0}e.showLoading=!0,r.checkLogin(),t.coupon=l,o.getdata("order/deliver_dropdown","POST",function(a){e.showLoading=!1,0==a.status&&(t.dates=a.list,t.times=a.list[0].time,t.uinfo=a.user_info,t.minus_amount=a.minus_amount?a.minus_amount:0,l.active_data=a.coupons,a.coupons&&!a.coupons.length&&(l.choose_sum=l.coupon_id=null),c.set("coupon_active",a.coupons),t.sum_price=l.choose_sum?a.sum-l.choose_sum:a.sum,l.choose_sum&&(t.minus_amount+=l.choose_sum))},{cartlist:s.getDetail()}),t.cartlist=s,t.remarks="",t.dialog=n.tips;var u=function(a){if(0==a.status)e.showLoading=!1,s.change=0,i.alert("订单生成成功"),l.coupon_id&&(angular.forEach(l.ucenterList.active_data,function(t,e){t.id==l.coupon_id&&(l.ucenterList.active_data.splice(e,1),l.ucenterList.inactive_data.push(t))}),l.choose_sum=l.coupon_id=null),s.clearInfo(),o.redirect("/order/list/");else if(alert(a.msg),a.products){t.products=a.products;var n=0;angular.forEach(s.users,function(e){angular.forEach(s.items[e].list,function(e){angular.forEach(t.products,function(t){e.id==t.id&&(e.last_price=e.price,e.price=t.price_in_db,e.status=t.status)}),n+=e.quantity*e.price})}),s.change=1,s.sum=n,s.setInfo(s),o.redirect("/cart")}};t.dateChange=function(){angular.forEach(t.dates,function(e){t.deliver_date&&e.name==t.deliver_date.name&&(t.times=e.time,t.deliver_time=void 0)})},t.confirm=function(){if(r.checkLogin(),!t.deliver_date)return void alert("请选择送货日期");if(!t.deliver_time)return void alert("请选择送货时间");var a=[];if(angular.forEach(s.users,function(e){angular.forEach(s.items[e].list,function(e){e.quantity<=0?t.remove(e,!0):a.push({id:e.id,location_id:e.location_id,title:e.title,price:e.price,quantity:e.quantity})})}),d()===!1)return void o.redirect("/cart");var n=i.confirm("您选择的配送时间是"+t.deliver_date.name+" "+t.deliver_time.msg+",大果网将准时进行配送，是否确认？");n&&(e.showLoading=!0,o.getdata("order/create","POST",u,{total_price:s.sum,products:a,deliver_date:t.deliver_date.val,deliver_time:t.deliver_time.code,remarks:t.remarks,coupon_id:l.coupon_id}))}}]),angular.module("dachuwang").controller("CityController",["$scope","$state","$cookieStore","daChuLocal","rpc","daChuTimer","posService","userAuthService",function(t,e,a,i,s,o,n,r){var l=function(){var e=i.get("localCity")||{};"undefined"!=typeof e.list&&o.compare(e.currentTime)?t.cities=e.list:s.load("/location/city","GET").then(function(e){t.cities=e.list;var a={currentTime:o.getNow(),list:e.list};i.set("localCity",a)})};l(),t.citySelect=function(a){r.isLogined()?(i.remove("packaged_cate"),alert("您的地理位置不能修改")):(i.remove("cateArr"),n.setInfo(t.cities[a].id,t.cities[a].name),i.remove("packaged_cate")),e.go("page.home")}}]),angular.module("dachuwang").controller("cartController",["$scope","$rootScope","$filter","$cookieStore","$window","cartlist","req","daChuDialog","posService","rpc","userAuthService",function(t,e,a,i,s,o,n,r,l,c,d){t.isLogined=d.isLogined(),t.cartlist=o;var u=l.info(),p=u.id;o.count>0&&(t.products=t.cartlist.items[0].list),t.dialog=r.tips;var g=function(t){t.status&&(e.showLoading=!1,n.redirect("/order/list"))};t.init={startHour:0,dt:0,content:""},t.dates=[];var m=new Date,h={name:"今天",val:"today"},v={name:"明天",val:"tomorrow"};t.dates.push(h),t.dates.push(v),t.init.dt=t.dates[0],t.hours=[];for(var b=0;24>b;b++){var f={name:b+"点",val:b};t.hours.push(f)}var m=new Date,y=m.getHours();t.init.startHour=t.hours[y],t.hourChange=function(){return!1},o.limit_tips=[],t.createOrder=function(){c.load("order/today_bought_products","GET").then(function(e){if(angular.forEach(t.products,function(t){t.buy_limit&&t.buy_limit>0&&angular.forEach(e.list,function(e){var a=t.quantity+e.quantity>t.buy_limit?!0:!1;(t.id==e.product_id&&t.buy_limit<=e.quantity||t.id==e.product_id&&a)&&o.limit_tips.push({name:t.title,buy_limit:t.buy_limit,unit:t.unit})})}),t.tipsCon="",o.limit_tips&&o.limit_tips.length)return angular.forEach(o.limit_tips,function(e){t.tipsCon+=e.name+"仅限购买"+e.buy_limit+e.unit+","}),r.tips({bodyText:t.tipsCon+"请重新下单"}),o.limit_tips=[],void(t.tipsCon="");var e=[],a=1,i=0;angular.forEach(o.users,function(t){angular.forEach(o.items[t].list,function(t){0==t.status&&(a=0),parseInt(t.location_id)!=parseInt(p)&&(i=1)})}),0==a?alert("订单中存在已下架的商品，请删除后重新生成订单！"):1==i?alert("订单中存在不同售卖区域的产品，请删除后重新生产订单"):n.redirect("/confirm")})},t.confirm=function(){var a=i.get("token");if(!a)return n.redirect("/user/login","cart/detail"),!1;var s=[];angular.forEach(o.users,function(e){angular.forEach(o.items[e].list,function(e){e.quantity<=0?t.remove(e,!0):s.push({id:e.id,quantity:e.quantity})})}),e.showLoading=!0,n.getdata("order/add","POST",g,{total_price:o.sum,products:s,mindate:t.init.dt,content:t.init.content,minhour:t.init.startHour})},t.minus=function(e){1==e.quantity?t.remove(e):o.changeItem(e,-1)},t.plus=function(t){return-1!=t.storage&&t.storage<=t.quantity?(alert("抱歉库存不足"),void(t.quantity=parseInt(t.storage))):0!=t.buy_limit&&t.buy_limit==t.quantity?void alert("每人只能购买"+t.buy_limit+t.unit):void o.changeItem(t,1)},t.remove=function(t){var e=s.confirm("确认要删除？");e===!0&&o.changeItem(t,-1,0)},t.backUpNum={},t.clearNum=function(e){t.backUpNum[e.id]=e.quantity,e.quantity=""},t.setNum=function(e,a){-1!=e.storage&&e.storage<e.quantity&&(e.quantity=parseInt(e.storage)),0!=e.buy_limit&&e.quantity>e.buy_limit&&(e.quantity=parseInt(e.buy_limit)),a=a?a:!1,a&&""===e.quantity&&t.backUpNum[e.id]&&(e.quantity=t.backUpNum[e.id],t.backUpNum[e.id]=""),null!=e.quantity&&e.quantity<=0?e.quantity=0:(null!=e.quantity||a)&&(e.quantity<=0?t.remove(e):/^\d+$/.test(e.quantity)?o.changeItem(e,1,e.quantity):(e.quantity=1,o.changeItem(e,0)))}}]),angular.module("dachuwang").controller("advsController",["$scope","$stateParams","advService",function(t,e,a){a.detail(e.advId).then(function(e){t.item=e.info},function(){})}]),angular.module("dachuwang").controller("activityController",["$window","$scope","$stateParams","productService","categoryService","cartlist","Lightbox",function(t,e,a,i,s,o,n){e.ifnone_products=!1,e.show_loading=!0,e.backUpNum={},e.getProduct=function(t,a){var s=i.getProducts(t,a);s.then(function(t){e.show_loading=!1,e.products=t,angular.forEach(e.products,function(t){t.quantity=1,o.items[0]&&angular.forEach(o.items[0].list,function(e){t.id==e.id&&(t.quantity=e.quantity)})}),e.ifnone_products=t.length>0?!1:!0},function(){},function(){})},e.list_tips="",e.minus=function(t){1!=t.quantity&&t.quantity--},e.plus=function(t){return-1!=t.storage&&t.storage<=t.quantity?(alert("抱歉库存不足"),void(t.quantity=parseInt(t.storage))):0!=t.buy_limit&&t.buy_limit==t.quantity?void alert("每人只能购买"+t.buy_limit+t.unit):void(t.quantity>=9999||t.quantity++)},e.getProduct(11,1),e.cartlist=o,e.isdisabled=!0,e.toggleItems=function(t,e){return-1!=t.storage&&t.storage<t.quantity?(alert("抱歉库存不足"),void(t.quantity=parseInt(t.storage))):void(o.ids.indexOf(t.id)>=0?(o.changeItem(t,-1,0),t.quantity=e):o.changeItem(t,1,e))},e.clearNum=function(t){e.backUpNum[t.id]=t.quantity,t.quantity=""},e.setNum=function(t,a){return 0!=t.buy_limit&&t.quantity>t.buy_limit&&(t.quantity=parseInt(t.buy_limit)),a=a?a:!1,a&&""===t.quantity&&e.backUpNum[t.id]?(t.quantity=e.backUpNum[t.id],void(e.backUpNum[t.id]="")):void(null!=t.quantity&&t.quantity<=0?t.quantity=1:(null!=t.quantity||a)&&(t.quantity<=1?t.quantity=1:/^\d+$/.test(t.quantity)||(t.quantity=1)))},e.lightBox=function(t){angular.forEach(t,function(t){t.url=t.pic_url}),n.openModal(t,0)}}]),angular.module("dachuwang").controller("pageController",["$scope",function(){}]),angular.module("dachuwang").controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(t,e,a){t.items=a,t.selected={item:t.items[0]},t.ok=function(){e.close(t.selected.item)},t.cancel=function(){e.dismiss("cancel")}}]),angular.module("dachuwang").controller("headerController",["$scope","$state","posService","userAuthService",function(t,e,a,i){t.$state=e,t.localInfo=a.info(),t.isLogined=i.isLogined()}]),angular.module("dachuwang").controller("footerController",["$scope","cartlist","$state",function(t,e,a){var i=[{name:"商城",glyphicon:"glyphicon-home",href:"page.home"},{name:"采购清单",glyphicon:"glyphicon-shopping-cart",href:"page.cart",showBadge:!0},{name:"我的订单",glyphicon:"glyphicon-list-alt",href:"page.orderList"},{name:"个人中心",glyphicon:"glyphicon-user",href:"page.userCenter"}];t.tabList=i,t.cartlist=e,t.$state=a}]),angular.module("dachuwang").factory("userAuthService",["rpc","$cookieStore","daChuLocal","userService",function(t,e,a,i){var s=function(){var e=a.get("token");e||i.checkCookie()||t.redirect("user/login")},o=function(){var t=a.get("token");return i.checkCookie()||t?!0:!1};return{checkLogin:s,isLogined:o}}]),angular.module("dachuwang").factory("userService",["$http","$q","req","appConfigure","daChuLocal","rpc",function(t,e,a,i,s,o){var n=(i.url,3e4),r=function(){var t=new Date,a=s.get("baseInfo");if(a&&!isNaN(a.pro_time)&&a.pro_time+n>t.getTime())return e.when(a.data);var i=o.load("/customer/baseinfo");return i},l=function(){for(var t=document.cookie.split(";"),e=null,a=0;a<t.length;a++){var i=t[a].split("=")[0].replace(/^\s+|\s+$/,"");if("remember"==i){e=!0;break}e=!1}return e?!0:!1},c=function(){a.getdata("customer/logout","POST",function(){s.remove("token"),s.remove("currentLocation"),s.remove("packaged_cate"),s.remove("coupon_active"),a.redirect("/user/login")})};return{baseInfo:r,login_out:c,checkCookie:l}}]),angular.module("dachuwang").factory("daChuTimer",function(){var t={getNow:function(){return parseInt((new Date).getTime()/1e3)},cacheTime:30};return{getNow:t.getNow,setCacheTime:function(e){t.cacheTime=parseInt(e)},compare:function(e){var a=this.getNow();return parseInt(e)+t.cacheTime>a?!0:!1}}}),angular.module("dachuwang").factory("rpc",["$http","$q","$location","$cookieStore","appConfigure","daChuLocal",function(t,e,a,i,s,o){return{load:function(a,i,n){var r=this,l=e.defer();return void 0==i&&(i="POST"),t({url:s.url+"/"+a+"?r="+Math.random(),method:i,cache:!1,withCredentials:!0,data:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){t&&-100===t.status?(o.remove("token"),l.reject("您还未登录，请先登录。"),r.redirect("/user/login",r.refer)):t&&0===t.status?l.resolve(t):l.reject(t&&0!==t.status?t.msg:"请求失败，请检查网络。")}).error(function(t){l.reject(t)}),l.promise},init:a,refer:"/",redirect:function(t,e){return void 0!=e?this.refer=e:""==t&&a.path(this.refer),a.path(t),!1}}}]),angular.module("dachuwang").factory("req",["$http","$location","$cookieStore","appConfigure","daChuLocal",function(t,e,a,i,s){return{getdata:function(e,a,o,n){void 0==a&&(a="POST");var r=this;t({url:i.url+"/"+e+"?r="+Math.random(),method:a,cache:!1,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n}).success(function(t){t&&-100===t.status&&(s.remove("token"),r.redirect("/user/login",r.refer)),o(t)})},init:e,refer:"/",redirect:function(t,a){return void 0!=a?this.refer=a:""==t&&e.path(this.refer),e.path(t),!1}}}]),angular.module("dachuwang").factory("productService",["$http","$q","categoryService","rpc","posService",function(t,e,a,i,s){var o=function(t,a){var o=e.defer();if(isNaN(a)||0>=a)return e.derfer().reject("Error page param");var n=t,r=s.info(),l=r.id?r.id:804;return i.load("product/lists","POST",{upid:n,locationId:l}).then(function(t){o.resolve(t.list)}),o.promise};return{getProducts:o}}]),angular.module("dachuwang").factory("posService",["daChuLocal",function(t){var e=t.get("currentLocation"),a=e?e.id:804,i=e?e.name:"北京",s={id:a,name:i};return{setInfo:function(e,a){s.id=e,s.name=a,t.set("currentLocation",s)},info:function(){return s}}}]),angular.module("dachuwang").factory("pagination",function(){var t={page:1,isProcessing:!1,processingText:"努力加载中...",isDone:!1,more:"点击加载更多",callback:null};return t.nextPage=function(){t.isProcessing||t.isDone||(t.more="正在加载更多...",t.isProcessing=!0,t.page++,t.callback&&t.callback(function(e){e?(t.isDone=!0,t.more="没有更多了"):t.more="点击加载更多",t.isProcessing=!1}))},t.init=function(e){t.page=1,t.isProcessing=!1,t.isDone=!1,t.more="点击加载更多",t.callback=e},t}),angular.module("dachuwang").factory("notifyService",["$http",function(){var t=function(){return[{title:"您的订单201502280123已经在配送路上",content:"这里是详情"},{title:"您的订单201502280188已经在配送路上",href:"这里是详情"}]
};return{getAll:t}}]),angular.module("dachuwang").factory("locationService",function(){var t=function(){return"北京"};return{getCurrent:t}}),angular.module("dachuwang").factory("daChuLocal",function(){var t={get:function(t){var e=localStorage.getItem(t);return e?JSON.parse(e):null},set:function(t,e){localStorage.setItem(t,JSON.stringify(e))},remove:function(t){localStorage.removeItem(t)}};return t}),angular.module("dachuwang").factory("daChuDialog",["$modal",function(t){var e=function(e,a){var i={headerText:"提示信息",bodyText:"设置成功",closeText:"关闭"},s={templateUrl:"myModalContent.html"};angular.extend(s,a),angular.extend(i,e);t.open({templateUrl:s.templateUrl,controller:"ModalInstanceCtrl",resolve:{items:function(){return i}}})};return{tips:e}}]),angular.module("dachuwang").factory("coupon",["$rootScope","$modal","req",function(t,e,a){var i={active_data:[],no_active_data:[],ucenterList:{active_data:[],inactive_data:[]}};return i.query=function(t,e){a.getdata("coupon/lists","POST",t,e)},i}]),angular.module("dachuwang").factory("categoryService",["$http","$q","$cookieStore","daChuLocal","rpc","posService",function(t,e,a,i,s,o){var n=3e4,r=function(){var t=new Date,a=i.get("packaged_cate");if(a&&!isNaN(a.pro_time)&&a.pro_time+n>t.getTime())return e.when(a.cate);var r=e.defer(),l=i.get("currentLocation"),c=l?l.id:0;return s.load("category/lists","POST",{locationId:c}).then(function(e){var a=[];"undefined"!=typeof e.list.user_info.location_id&&o.setInfo(e.list.user_info.location_id,e.list.user_info.name),i.set("cateArr",e),i.set("advSwitch",e.adv_switch_index),angular.forEach(e.list.top,function(t){var i=[];angular.forEach(e.list.second[t.id],function(t){i.push({name:t.name,id:t.id})}),a.push({cate_parent:t.name,cate_parent_id:t.id,cate_child:i})}),i.set("packaged_cate",{pro_time:t.getTime(),cate:a}),r.resolve(a)}),r.promise},l=function(t){var a=e.defer(),s={topName:"",list:[]},o=i.get("cateArr");if(o&&o.list.top.length>0){var n=!1;angular.forEach(o.list.second,function(e){angular.forEach(e,function(e){return e.id===t?(s.topName=e.name,void(n=!0)):void 0}),n===!0}),n===!1&&a.reject("error parent category id"),a.resolve(s)}else a.reject("you must load home page first");return a.promise};return{getAll:r,getSubCategory:l}}]),angular.module("dachuwang").factory("cartlist",["$filter",function(t){function e(){var t=JSON.parse(localStorage.getItem("cartInfo"));return t||(t={count:0,sum:0,items:{},ids:[],users:[],change:0},localStorage.setItem("cartInfo",JSON.stringify(t))),t}function a(t){var e={items:angular.isObject(t.items)?t.items:{},ids:angular.isArray(t.ids)?t.ids:[],users:angular.isArray(t.users)?t.users:[],count:parseInt(t.count)>0?parseInt(t.count):0,sum:parseFloat(t.sum)>0?parseFloat(t.sum):0,change:parseInt(t.change)>0?parseInt(t.change):0};return e.sum=l(e.sum,2),localStorage.setItem("cartInfo",JSON.stringify(e))}function i(){r.count=0,r.sum=0,r.items={},r.ids=[],r.users=[],r.change=0,a(r)}function s(t,e,a,i){if(e&&e.id){t.list=t.list||[],t.ids=t.ids||[],t.count=t.count||0,t.sum=t.sum||0;var s=t.ids.indexOf(e.id);s>=0?(i&&i>0?t.list[s].quantity=i:0>=i?t.list[s].quantity=0:a>0?t.list[s].quantity++:0>a&&t.list[s].quantity--,t.list[s].quantity<=0?(t.list.splice(s,1),t.ids.splice(s,1)):t.list[s].quantity>9999&&(t.list[s].quantity=9999)):(e.quantity=i&&i>0?i>9999?9999:i:1,t.ids.push(e.id),t.list.push(e));var o=0,n=0;return angular.forEach(t.list,function(t){o+=t.quantity,n+=t.quantity*t.price}),t.count=o,t.sum=n,t.sum=l(t.sum,2),t}}function o(){var t=[];return angular.forEach(r.users,function(e){angular.forEach(r.items[e].list,function(e){e.quantity>0&&t.push({title:e.title,id:e.id,location_id:e.location_id,price:e.price,quantity:e.quantity,category_id:e.category_id,sku_number:e.sku_number})})}),t}function n(t,e,i){if(t&&t.id){var o=r.users.indexOf(t.user_id);0>o&&(r.users.push(t.user_id),r.items[t.user_id]={}),r.items[t.user_id]=s(r.items[t.user_id],t,e,i);var n=0,l=0,c=0,d=[],u=[],p={};angular.forEach(r.users,function(t){angular.forEach(r.items[t].list,function(t){t.quantity=parseInt(t.quantity),n+=t.quantity,c+=t.quantity*t.price,d.push(t.id),0==t.status&&(l=1)}),r.items[t].count>0&&(u.push(t),p[t]=r.items[t])}),r.count=n,r.sum=c,r.ids=d,r.users=u,r.items=p,r.change=l,a(r)}}var r=e(),l=t("money");return r.changeItem=n,r.getInfo=e,r.getDetail=o,r.setInfo=a,r.clearInfo=i,r}]),angular.module("dachuwang").factory("advService",["$q","rpc","daChuLocal",function(t,e,a){var i=function(){var i=t.defer(),s=a.get("currentLocation"),o=s?s.id:804;return e.load("ads/lists","POST",{pos_id:1,locationId:o}).then(function(t){i.resolve(t)},function(){i.resolve(!1)}),i.promise},s=function(a){var i=t.defer();return e.load("ads/info","POST",{id:a}).then(function(t){i.resolve(t)},function(){defered.resolve(!1)}),i.promise};return{getAds:i,detail:s}}]),angular.module("dachuwang").filter("money",function(){return function(t,e){return t=parseFloat(t)||0,e=0/0!=parseInt(e)?parseInt(e):1,t.toFixed(e)}}),angular.module("dachuwang").directive("updateTitle",["$rootScope","$timeout",function(t,e){return{link:function(a,i){var s=function(t,a){var s="大果网";a.data&&a.data.pageTitle&&(s=a.data.pageTitle),e(function(){i.text(s)},0,!1)};t.$on("$stateChangeSuccess",s)}}}]),angular.module("dachuwang").directive("updateBackstack",["$rootScope","req",function(t){return{link:function(e,a){var i=function(t,e){var i="page";e.backPath&&(i=e.backPath),a.attr("ui-sref",i)};t.$on("$stateChangeSuccess",i)}}}]),angular.module("dachuwang").directive("setClass",["cartlist",function(t){return{link:function(e,a,i){var s=function(){angular.isObject(i.setClass)||(i.setClass=JSON.parse(i.setClass)),i.setClass&&-1!=i.setClass.storage&&i.setClass.quantity>i.setClass.storage||(a.hasClass("btn-warning")?(a.removeClass("btn-warning").addClass("btn-default"),a.children(".text").html("移出购物车")):a.hasClass("btn-default")&&(a.removeClass("btn-default").addClass("btn-warning"),a.children(".text").html("加入购物车")))};if(a.bind("click",function(){s()}),a.children(".text").html("加入购物车"),t.ids){var o=i.id;angular.forEach(t.ids,function(t){t==o&&s()})}}}}]),angular.module("dachuwang").directive("reback",["$state",function(t){return{link:function(e,a){a.bind("click",function(){var e=t.current.data;e.backState?t.go(e.backState):history.go(-1)})}}}]),angular.module("dachuwang").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(t,e,a){var i="app/modules/",s="components/",o={home:0,cart:1,order:2,user:3};t.state("page",{url:"/",data:{pageTitle:"大果网",tabIndex:o.home,showBack:!1},views:{"":{templateUrl:s+"page/page.html",controller:"pageController"},"@page":{templateUrl:i+"home/home.html",controller:"homeController",resolve:{categoryService:"categoryService",cateObj:["categoryService",function(t){return t.getAll()}]}}}}).state("page.home",{url:"home",templateUrl:i+"home/home.html",controller:"homeController",data:{pageTitle:"大果网",tabIndex:o.home,showBack:!1},resolve:{categoryService:"categoryService",cateObj:["categoryService",function(t){return t.getAll()}]}}).state("loginpage",{url:"/user/login",data:{pageTitle:"登录",showBack:!0},templateUrl:i+"user/login.html",controller:"UserLoginController"}).state("page.password",{url:"user/password",data:{pageTitle:"修改密码",showBack:!0},templateUrl:i+"user/password.html",controller:"UserPasswordController"}).state("page.citySelect",{url:"city",data:{pageTitle:"更换城市",showBack:!0},templateUrl:i+"city/list.html",controller:"CityController"}).state("page.orderList",{url:"order/list/{status:[0-9]{0,8}}",data:{pageTitle:"我的订单",tabIndex:o.order,showBack:!0,backState:"page.home"},templateUrl:function(){return i+"order/orderList.html"},controller:"orderListController"}).state("page.list",{url:"list/{cateId:[0-9]{1,8}}",data:{pageTitle:"商品列表",tabIndex:o.home,showBack:!0},templateUrl:function(){return i+"list/list.html"},controller:"padController"}).state("page.cart",{url:"cart",templateUrl:i+"cart/cart.html",controller:"cartController",data:{pageTitle:"采购清单",tabIndex:o.cart,showBack:!0,backState:"page.home"}}).state("page.userCenter",{url:"user/center",templateUrl:i+"user/center.html",controller:"UserCenterCtrl",data:{pageTitle:"个人中心",tabIndex:o.user,showBack:!0,backState:"page.home"}}).state("page.advs",{url:"advs/{advId:[0-9]{1,}}",templateUrl:i+"advs/detail.html",controller:"advsController",data:{pageTitle:"活动详情",tabIndex:o.home,showBack:!0,backState:"page.home"}}).state("page.subject",{url:"subject/{subjectId:[0-9]{1,}}",templateUrl:i+"subjects/activity.html",controller:"subjectController",data:{pageTitle:"专题详情",tabIndex:o.home,showBack:!0,backState:"page.home"}}).state("page.coupon",{url:"user/coupon",templateUrl:i+"user/coupon.html",controller:"couponController",data:{pageTitle:"优惠劵",tabIndex:o.user,showBack:!0,backState:"page.userCenter"}}).state("page.chooseCoupon",{url:"user/chooseCoupon",templateUrl:i+"user/chooseCoupon.html",controller:"chooseController",data:{pageTitle:"选择优惠劵",tabIndex:o.cart,showBack:!0,backState:"page.confirm"}}).state("page.confirm",{url:"confirm",templateUrl:i+"confirm/confirm.html",controller:"confirmController",data:{pageTitle:"确认订单",tabIndex:o.cart,showBack:!0,backState:"page.cart"}}),e.otherwise("/home"),a.html5Mode(!0)}]),angular.module("dachuwang").provider("appConfigure",{$get:["$location",function(t){var e=t.$$host;return e.indexOf("dachuwang")<0&&(e="guo.dachuwang.net"),{url:"http://api."+e}}]}),angular.module("dachuwang").run(["$templateCache",function(t){t.put("components/footer/footer.html",'<nav class="nav fix-bottom action-nav" ng-controller="footerController"><div class="container"><ul class="nav action-nav actionbar-tabs"><li class="col-xs-3" ng-repeat="tab in tabList" ng-class="{active : $index === $state.current.data.tabIndex}"><a ui-sref="{{tab.href}}"><span class="glyphicon {{tab.glyphicon}}"></span>{{tab.name}}<span ng-if="tab.showBadge && cartlist.ids.length > 0" class="badge badge-alert badge-cart" ng-bind="cartlist.ids.length"></span></a></li></ul></div></nav>'),t.put("components/header/header.html",'<header class="head" ng-controller="headerController"><div class="container-fluid"><div class="row head-top"><div class="col-xs-4 backup text-left"><a reback="" ng-show="$state.current.data.showBack"><span class="glyphicon glyphicon-menu-left"></span>&nbsp;返回</a> <em ng-show="!$state.current.data.showBack"><span class="glyphicon glyphicon-map-marker"></span> <a ng-if="!isLogined" ui-sref="page.citySelect">{{localInfo.name}} <span class="glyphicon glyphicon-chevron-down"></span></a> <a ng-if="isLogined">{{localInfo.name}}</a></em></div><div class="col-xs-4 listname" ng-bind="$state.current.data.pageTitle"></div><div class="col-xs-4 call"><a href="tel:400-8199-491">客服&nbsp;<span class="glyphicon glyphicon-earphone"></span></a></div></div></div></header><script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script>'),t.put("components/page/page.html",'<div ng-include="\'components/header/header.html\'"></div><div ui-view=""></div><div ng-include="\'components/footer/footer.html\'"></div>'),t.put("app/modules/advs/activity.html",'<div class="warp-page p-0 container-fluid"><div class="thumbnail mb-0" ng-if="products"><a class="diy_block"><img ng-src="http://img.dachuwang.com/misc/13874856d43831c24fcc62fcc9305da9.jpg" alt="{{slide.caption}}" class="b-0 img-thumbnail"></a></div><div ng-show="show_loading === true"><div class="loading_spinner"><div class="loading_bounce1"></div><div class="loading_bounce2"></div><div class="loading_bounce3"></div></div></div><div ng-if="ifnone_products === true" class="row block block-col"><div class="col-xs-12 pt-10 pb-10 text-center" role="alert"><h4>抱歉！此分类下暂无商品</h4></div></div><div class="p-lr-15"><div class="row" ng-repeat="product in products"><ul class="seconedlist-ul clearfix"><li><div class="col-xs-12"><h4 class="green">{{product.title}}</h4></div><div class="col-xs-12" ng-if="product.adv_words"><h6 class="text-danger">{{product.adv_words}}</h6></div><div class="col-xs-4 pb-10 img_show text-center" ng-if="product.pictures[0].pic_url"><img ng-click="lightBox(product.big_imgs)" class="img-rounded zoom8" ng-src="{{product.pictures[0].pic_url}}"></div><div class="pull-left pb-10 info" ng-class="{\'col-xs-8\':product.pictures[0].pic_url,\'col-xs-12\':!product.pictures[0].pic_url}"><h6 ng-repeat="spec in product.spec" ng-show="spec.val">{{spec.name}}：<span>{{spec.val}}</span></h6><h6>价格： <span ng-if="product.is_round == 1">约</span> <span class="text-danger">&yen;{{product.price}}</span> <span style="text-decoration:line-through" ng-show="false">&nbsp;&yen;{{product.market_price}}</span> <span ng-if="product.unit">/{{product.unit}}</span> <span class="text-danger" ng-if="product.buy_limit != 0">&nbsp; (限购{{product.buy_limit}}{{product.unit}})</span></h6><h6 class="text-default" ng-if="product.unit != product.close_unit_name && product.close_unit_name">单价：{{product.single_price}}/{{product.close_unit_name}}</h6><h6 class="text-danger" ng-if="product.close_unit_name != product.unit && product.close_unit_name">按{{product.unit}}售卖, 按{{product.close_unit_name}}结算</h6></div><div class="col-xs-12 pb-10 row_br" ng-if="product.storage == 0 && 0"><span class="text-warning">已卖完咯，请等待下一次促销</span></div><div class="col-xs-12 pd-0 pb-10 row_br" ng-if="product.storage != 0"><div class="col-xs-5 pr-0 pull-left"><div class="text-danger pt-pb-6" ng-show="cartlist.ids.indexOf(product.id) >= 0">已加入{{product.quantity}}{{product.unit}}</div><div class="diy_cartP input-group input-group-sm" ng-show="cartlist.ids.indexOf(product.id) < 0"><span class="input-group-addon order-btn-minus"><em class="glyphicon glyphicon-minus disa text-primary" ng-click="minus(product)"></em></span> <input type="number" min="1" class="prval form-control text-center" ng-model="product.quantity" ng-focus="clearNum(product)" ng-blur="setNum(product, true)" ng-change="setNum(product)"> <span class="input-group-addon order-btn-plus"><button class="glyphicon glyphicon-plus text-primary reset_btn" ng-disabled="is_limit" ng-click="plus(product)"></button></span></div></div><div class="col-xs-3 pl-0 pr-0 pt-pb-6" ng-if="product.storage >0">&nbsp; 剩余{{product.storage}}{{product.unit}}</div><div class="col-xs-4 pl-0 pull-right text-right mb-10" ng-show="product.storage == 0"><button class="is_shop white-c btn btn-defualt w100" ng-disabled="true"><span class="text">&nbsp;已售罄&nbsp;</span></button></div><div class="col-xs-4 pl-0 pull-right text-right mb-10"><button class="is_shop btn btn-warning w100" id="{{product.id}}" ng-click="toggleItems(product, product.quantity)" set-class="{{product}}"><span class="text">加入购物车</span></button></div></div></li></ul></div></div><div class="thumbnail mb-0" ng-if="products"><a class="diy_block"><img ng-src="http://img.dachuwang.com/misc/13874856d43831c24fcc62fcc9305da9.jpg" alt="{{slide.caption}}" class="b-0 img-thumbnail"></a></div></div>'),t.put("app/modules/advs/detail.html",'<div class="warp-page"><div><img ng-src="{{item.detail_img}}" class="img-thumbnail pd-0"></div></div>'),t.put("app/modules/cart/cart.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div class="container-fluid warp-page sec_body" ng-show="!showLoading"><div class="seconedlist"><div class="alert alert-danger row block" ng-show="cartlist.change == 1" role="alert">购物车里面的商品信息已经发生变化，请删除无货商品，确认最新商品价格信息并重新提交。</div><div ng-show="cartlist.count == 0"><div class="row block"><div class="col-xs-12 block-col text-center"><h4>您的购物车没有商品</h4><br><a ui-sref="page.home" class="btn btn-info">去首页</a></div></div></div><div class="row" ng-repeat="product in products" ng-show="cartlist.count > 0"><ul class="seconedlist-ul clearfix"><li><div class="orderlist-hd"><div class="clearfix"><div class="col-xs-10"><h4>{{product.title}}</h4><small ng-repeat="spec in product.spec" ng-show="spec.val">{{spec.name}}：{{spec.val}}<br></small> <small class="text-danger" ng-if="isLogined">售卖区域 ：{{product.location_name}}<br></small> <small ng-if="product.storage >0">库存： 剩余{{product.storage}}{{product.unit}}</small><p>单价： <span class="text-danger">&yen;{{product.price}}<em ng-show="product.unit">/{{product.unit}}</em></span>&nbsp; <span class="orange text-danger" ng-if="product.buy_limit != 0">&nbsp; (限购{{product.buy_limit}}{{product.unit}})</span> <span class="text-danger" ng-if="product.status != 1">上次价格:<span class="line-through">&yen;{{product.last_price}}<em ng-show="product.unit">/{{product.unit}}</em></span><br><span class="label label-danger pull-right" ng-if="product.status == 0">商品已下架</span> <span class="label label-warning pull-right" ng-if="product.status == 2">价格上涨</span> <span class="label label-success pull-right" ng-if="product.status == 3">价格下跌</span></span>&nbsp; <span ng-show="false" class="line-through">(&yen;{{product.market_price}})</span></p></div><div class="col-xs-2 text-right"><h4><em class="glyphicon glyphicon-remove text-danger" ng-click="remove(product)"></em></h4></div></div></div><div class="orderlist-bd"><div class="clearfix"><div class="col-xs-5">总计<span class="origin">{{ (product.price*product.quantity) | money : 2}}</span>元</div><div class="col-xs-7"><div class="input-group input-group-sm"><span class="input-group-addon"><em class="glyphicon glyphicon-minus text-primary" ng-click="minus(product)"></em></span> <input type="number" min="1" class="form-control text-center" ng-model="product.quantity" ng-focus="clearNum(product)" ng-blur="setNum(product,true)" ng-change="setNum(product)"> <span class="input-group-addon"><em class="glyphicon glyphicon-plus text-primary" ng-click="plus(product)"></em></span></div></div></div></div></li></ul></div><div class="row block block-col pt-10 pb-10" ng-show="cartlist.count>0"><div class="col-xs-12 text-center"><h4>共{{cartlist.count}}件，总计<span class="origin">{{cartlist.sum | money:2}}</span>元</h4></div><div ng-if="cartlist.count>0" class="col-xs-12"><h5><a ng-click="createOrder();" class="btn btn-block btn-success btn-lg">生成订单</a></h5></div></div></div></div>'),t.put("app/modules/city/list.html",'<div class="warp-page container-fluid"><div ng-show="show_loading === true"><div class="loading_spinner"><div class="loading_bounce1"></div><div class="loading_bounce2"></div><div class="loading_bounce3"></div></div></div><section class="i_list"><div class="row"><div class="col-xs-12 i_class"><a href="#" ng-click="citySelect($index)" ng-repeat="city in cities">{{city.name}}</a></div></div></section></div>'),t.put("app/modules/confirm/confirm.html",'<div class="mt-nav mb-nav container-fluid" ng-show="!showLoading"><div class="row block block-col pt-10 pb-10"><h4 class="col-xs-12">请确认订单内容</h4><div class="col-xs-12"><div class="row pb-10 pt-10 block-col" ng-repeat="item in cartlist.items[0].list"><div class="col-xs-6">{{item.title}}<span class="text-warning"><br><small ng-repeat="spec in item.spec" ng-show="spec.val">{{spec.name}}：{{spec.val}}<br></small></span></div><div class="col-xs-3 text-center text-danger pl-0 pr-0">&yen; {{item.price}}</div><div class="col-xs-3 text-center pl-0 pr-0">{{item.quantity}}</div></div></div></div><div class="row block"><div class="col-xs-12"><a ui-sref="page.chooseCoupon" class="text-333"><h4 class="green pull-left"><span class="pr sprite sprite-my_info"></span> 优惠劵 <span class="label label-success m-l-5" ng-show="coupon.active_data && coupon.active_data.length != 0"><span class="orange">{{coupon.active_data.length}}</span>张可用</span> <span class="label label-default m-l-5" ng-show="coupon.active_data && coupon.active_data.length == 0">无可用</span></h4><h5 class="pull-right text-333" ng-show="coupon.choose_sum">已抵用<span class="orange">{{coupon.choose_sum}}</span>元<span class="glyphicon glyphicon-chevron-right"></span></h5><h5 class="pull-right text-333" ng-show="!coupon.choose_sum">未使用<span class="glyphicon glyphicon-chevron-right"></span></h5></a></div></div><div class="row block"><div class="col-xs-12 text-right"><h5>商品总价<span class="origin">约{{cartlist.items[0].sum}}</span>元</h5><h5>优惠<span class="origin">- {{minus_amount}}</span>元</h5><h5>应付<span class="origin">{{sum_price}}</span>元</h5></div></div><form class="row block block-col form pt-10 pb-10" name="confirmForm" role="form" novalidate="" ng-submit="confirm();"><h4 class="col-xs-12">请选择期望送货时间</h4><div class="col-xs-12"><div class="row pb-10 pt-10 block-col"><div class="col-xs-6"><select class="input-lg w100" ng-model="deliver_date" ng-options="m.name for m in dates" ng-change="dateChange();" required=""><option value="">请选择送货日期</option></select></div><div class="col-xs-6"><select class="input-lg w100" ng-model="deliver_time" ng-options="m.msg for m in times" required=""><option value="">请选择送货时间</option></select></div></div></div><div class="form-group"><div class="col-xs-12"><h4>收货地址</h4><label>{{uinfo.address}}</label><h5>收货人：{{uinfo.name}}({{uinfo.mobile}})</h5></div></div><div class="form-group"><div class="col-xs-12"><h4>其他要求</h4><textarea id="content" class="input-lg form-control" rows="3" ng-model="remarks" placeholder="请输入其他要求"></textarea></div></div><div class="col-xs-12 pb-10 pt-10"><button class="btn btn-block btn-lg btn-success" type="submit">确认订单</button></div></form></div>'),t.put("app/modules/home/home.html",'<div class="warp-page container-fluid"><div class="row" ng-if="showAdv"><carousel interval="myinterval" class="pr-0 pl-0 col-xs-12"><slide ng-repeat="slide in slides"><div class="thumbnail mb-0"><a ui-sref="{{slide.sref}}" class="diy_block"><img ng-src="{{slide.url}}" alt="{{slide.caption}}" class="img-thumbnail"></a></div></slide><carousel></carousel></carousel></div><section class="i_list"><div class="row" ng-repeat="cate in category"><div class="col-xs-3 flex-center"><div><p><img ng-src="assets/images/category/{{cate.cate_parent}}.png" class="pic"></p><p class="c_mt10 title">{{cate.cate_parent}}</p></div></div><div class="col-xs-9 i_class"><a ui-sref="page.list({cateId:{{sub_cate.id}}})" ng-repeat="sub_cate in cate.cate_child">{{sub_cate.name}}</a></div></div></section></div>'),t.put("app/modules/list/list.html",'<div class="warp-page container-fluid"><div ng-show="show_loading === true"><div class="loading_spinner"><div class="loading_bounce1"></div><div class="loading_bounce2"></div><div class="loading_bounce3"></div></div></div><div ng-if="products.length == 0" class="row block block-col"><div class="col-xs-12 pt-10 pb-10 text-center" role="alert"><h4>抱歉！此分类下暂无商品</h4></div></div><div class=""><div class="row" ng-repeat="product in products"><ul class="seconedlist-ul clearfix"><li><div class="col-xs-12"><h4 class="green">{{product.title}}</h4></div><div class="col-xs-12" ng-if="product.adv_words"><h6 class="text-danger">{{product.adv_words}}</h6></div><div class="col-xs-4 pb-10 img_show text-center" ng-if="product.pictures[0].pic_url"><img ng-click="lightBox(product.big_imgs)" class="img-rounded zoom8" ng-src="{{product.pictures[0].pic_url}}"></div><div class="pull-left pb-10 info" ng-class="{\'col-xs-8\':product.pictures[0].pic_url,\'col-xs-12\':!product.pictures[0].pic_url}"><h6 ng-repeat="spec in product.spec" ng-show="spec.val">{{spec.name}}：<span>{{spec.val}}</span></h6><h6>价格： <span ng-if="product.is_round == 1">约</span> <span class="text-danger">&yen;{{product.price}}</span> <span style="text-decoration:line-through" ng-show="false">&nbsp;&yen;{{product.market_price}}</span> <span ng-if="product.unit">/{{product.unit}}</span> <span class="text-danger" ng-if="product.buy_limit != 0">&nbsp; (限购{{product.buy_limit}}{{product.unit}})</span></h6><h6 class="text-default" ng-if="product.unit != product.close_unit_name && product.close_unit_name">单价：{{product.single_price}}/{{product.close_unit_name}}</h6><h6 class="text-danger" ng-if="product.close_unit_name != product.unit && product.close_unit_name">按{{product.unit}}售卖, 按{{product.close_unit_name}}结算</h6></div><div class="col-xs-12 pb-10 row_br" ng-if="product.storage == 0 && 0"><span class="text-warning">已卖完咯，请等待下一次促销</span></div><div class="col-xs-12 pd-0 pb-10 row_br" ng-if="product.storage != 0"><div class="col-xs-5 pr-0 pull-left"><div class="text-danger pt-pb-6" ng-show="cartlist.ids.indexOf(product.id) >= 0">已加入{{product.quantity}}{{product.unit}}</div><div class="diy_cartP input-group input-group-sm" ng-show="cartlist.ids.indexOf(product.id) < 0"><span class="input-group-addon order-btn-minus"><em class="glyphicon glyphicon-minus disa text-primary" ng-click="minus(product)"></em></span> <input type="number" min="1" class="prval form-control text-center" ng-model="product.quantity" ng-focus="clearNum(product)" ng-blur="setNum(product, true)" ng-change="setNum(product)"> <span class="input-group-addon order-btn-plus"><button class="glyphicon glyphicon-plus text-primary reset_btn" ng-disabled="is_limit" ng-click="plus(product)"></button></span></div></div><div class="col-xs-3 pl-0 pr-0 pt-pb-6" ng-if="product.storage >0">&nbsp; 剩余{{product.storage}}{{product.unit}}</div><div class="col-xs-4 pl-0 pull-right text-right mb-10" ng-show="product.storage == 0"><button class="is_shop white-c btn btn-defualt w100" ng-disabled="true"><span class="text">&nbsp;已售罄&nbsp;</span></button></div><div class="col-xs-4 pl-0 pull-right text-right mb-10"><button class="is_shop btn btn-warning w100" id="{{product.id}}" ng-click="toggleItems(product, product.quantity)" set-class="{{product}}"><span class="text">加入购物车</span></button></div></div></li></ul></div></div></div>'),t.put("app/modules/order/orderList.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div class="warp-page container-fluid"><div class="head-bottom"><div class="flex-nav"><ul class="flex-center"><li ng-class="{active : showType == tab.status}" ng-repeat="tab in tabs"><a ng-click="setStatus({{tab.status}});">{{tab.name}}</a></li></ul></div></div><div class="mt-nav"><div class="row block-col block" ng-show="orderlist.length == 0"><div class="col-xs-12 text-center pt-10 pb-10"><h4 ng-show="isProcessing">努力加载中...</h4><h4 ng-show="!isProcessing">暂时没有符合条件的订单</h4></div></div><div class="row" ng-repeat="order in orderlist" ng-show="orderlist.length > 0"><ul class="order-ul clearfix"><li><div class="orderbody"><div class="order-hd"><span class="f-right">状态：{{order.status_cn}}</span>&nbsp; 订单编号：{{order.order_number}}</div><div class="btn-group order-chose btn-group-justified"><b class="col-xs-6">产品</b> <b class="col-xs-3">数量</b> <b class="col-xs-3">小计</b></div><div class="btn-group order-chose btn-group-justified pb-10" ng-repeat="product in order.detail"><span class="col-xs-6">{{product.name}} <small ng-repeat="spec in product.spec" class="text-warning" ng-show="spec.val"><br>{{spec.name}}：{{spec.val}}</small></span> <span class="col-xs-3 text-danger">{{product.quantity}}</span> <span class="col-xs-3">&yen;{{product.sum_price}}</span></div><div class="group-item"><div class="f_left">支付方式&nbsp;&nbsp;<span class="origin" ng-if="order.pay_type == 1">微信支付</span><span class="origin" ng-if="order.pay_type == 0">货到付款</span></div><div class="f_right"><p ng-if="order.minus_amount >= 0">优惠：&yen;{{order.minus_amount}}</p><p ng-if="order.deliver_fee >= 0">运费：&yen;{{order.deliver_fee}}</p>实付&nbsp;&nbsp;<span class="origin">&yen;{{order.total_price - order.minus_amount + order.deliver_fee}}</span></div></div><div class="order-bd-bottom"><a class="f_right btn btn-default" ng-if="showType == 2" ng-click="cancel({{order.id}});">取消订单</a><div class="order-time"><p>下单时间：{{order.created_time}}</p><p>配送时间：{{order.deliver_date}} {{order.deliver_time}}</p></div></div></div></li></ul></div></div></div>'),t.put("app/modules/page/page.html",'<div ui-view="">Loading...........</div><nav class="nav fix-bottom action-nav"><div class="container"><ul class="nav action-nav actionbar-tabs"><li class="col-xs-3"><a ui-sref="home.main"><span class="glyphicon glyphicon-home"></span>首页<span class="badge badge-alert badge-cart"></span></a></li><li class="col-xs-3"><a ui-sref="page.order"><span class="glyphicon glyphicon-shopping-cart"></span>采购清单<span class="badge badge-alert badge-cart"></span></a></li><li class="col-xs-3"><a ui-sref="confirm"><span class="glyphicon glyphicon-list-alt"></span>我的订单<span class="badge badge-alert badge-cart"></span></a></li><li class="col-xs-3"><a ui-sref="home.main"><span class="glyphicon glyphicon-user"></span>个人中心<span class="badge badge-alert badge-cart"></span></a></li></ul></div></nav>'),t.put("app/modules/subjects/activity.html",'<div class="warp-page p-0 container-fluid"><div class="thumbnail mb-10 b-r-0 p-0" ng-if="products"><a class="diy_block"><img ng-src="{{info.banner_url}}" class="b-0 p-0 b-r-0 img-thumbnail"></a></div><div ng-show="show_loading === true"><div class="loading_spinner"><div class="loading_bounce1"></div><div class="loading_bounce2"></div><div class="loading_bounce3"></div></div></div><div ng-if="!products" class="row block block-col"><div class="row ml-0 mr-0"><img ng-src="{{info.pic_url}}" alt="{{info.title}}" class="col-xs-12 img-thumbnail pd-0"></div></div><div class="p-lr-15"><div class="row" ng-repeat="product in products"><ul class="seconedlist-ul clearfix"><li><div class="col-xs-12"><h4 class="green">{{product.title}}</h4></div><div class="col-xs-12" ng-if="product.adv_words"><h6 class="text-danger">{{product.adv_words}}</h6></div><div class="col-xs-4 pb-10 img_show text-center" ng-if="product.pictures[0].pic_url"><img ng-click="lightBox(product.big_imgs)" class="img-rounded zoom8" ng-src="{{product.pictures[0].pic_url}}"></div><div class="pull-left pb-10 info" ng-class="{\'col-xs-8\':product.pictures[0].pic_url,\'col-xs-12\':!product.pictures[0].pic_url}"><h6 ng-repeat="spec in product.spec" ng-show="spec.val">{{spec.name}}：<span>{{spec.val}}</span></h6><h6>价格： <span ng-if="product.is_round == 1">约</span> <span class="text-danger">&yen;{{product.price}}</span> <span style="text-decoration:line-through" ng-show="false">&nbsp;&yen;{{product.market_price}}</span> <span ng-if="product.unit">/{{product.unit}}</span> <span class="text-danger" ng-if="product.buy_limit != 0">&nbsp; (限购{{product.buy_limit}}{{product.unit}})</span></h6><h6 class="text-default" ng-if="product.unit != product.close_unit_name && product.close_unit_name">单价：{{product.single_price}}/{{product.close_unit_name}}</h6><h6 class="text-danger" ng-if="product.close_unit_name != product.unit && product.close_unit_name">按{{product.unit}}售卖, 按{{product.close_unit_name}}结算</h6></div><div class="col-xs-12 pb-10 row_br" ng-if="product.storage == 0 && 0"><span class="text-warning">已卖完咯，请等待下一次促销</span></div><div class="col-xs-12 pd-0 pb-10 row_br" ng-if="product.storage != 0"><div class="col-xs-5 pr-0 pull-left"><div class="text-danger pt-pb-6" ng-show="cartlist.ids.indexOf(product.id) >= 0">已加入{{product.quantity}}{{product.unit}}</div><div class="diy_cartP input-group input-group-sm" ng-show="cartlist.ids.indexOf(product.id) < 0"><span class="input-group-addon order-btn-minus"><em class="glyphicon glyphicon-minus disa text-primary" ng-click="minus(product)"></em></span> <input type="number" min="1" class="prval form-control text-center" ng-model="product.quantity" ng-focus="clearNum(product)" ng-blur="setNum(product, true)" ng-change="setNum(product)"> <span class="input-group-addon order-btn-plus"><em class="glyphicon glyphicon-plus text-primary reset_btn" ng-disabled="is_limit" ng-click="plus(product)"></em></span></div></div><div class="col-xs-3 pl-0 pr-0 pt-pb-6" ng-if="product.storage >0">&nbsp; 剩余{{product.storage}}{{product.unit}}</div><div class="col-xs-4 pl-0 pull-right text-right mb-10" ng-show="product.storage == 0"><button class="is_shop white-c btn btn-defualt w100" ng-disabled="true"><span class="text">&nbsp;已售罄&nbsp;</span></button></div><div class="col-xs-4 pl-0 pull-right text-right mb-10"><button class="is_shop btn btn-warning w100" id="{{product.id}}" ng-click="toggleItems(product, product.quantity)" set-class="{{product}}"><span class="text">加入购物车</span></button></div></div></li></ul></div></div><div class="thumbnail mb-0 b-r-0 p-0" ng-if="products"><a class="diy_block"><img ng-src="{{info.detail_img}}" class="b-0 img-thumbnail b-r-0 p-0"></a></div></div>'),t.put("app/modules/user/center.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div class="warp-page container-fluid" ng-show="!showLoading"><div class="row block"><div class="col-xs-12"><h4 class="green"><span class="pr sprite sprite-my_order"></span> 我的订单</h4></div><div class="col-xs-12 block-col center_nav"><div class="col-xs-3 pr p-0"><a ng-href="/order/list/2" class="text-primary text-333"><div class="text-center"><span class="pr sprite sprite-wati_ok"><span class="badge white_bg orange_br orange" ng-show="order[2] != 0">{{order[2]}}</span></span></div><h5 class="text-center m-0">待确认</h5></a></div><div class="col-xs-3 pr"><a ng-href="/order/list/100" class="text-primary text-333"><div class="text-center"><span class="pr sprite sprite-wati_sh"><span class="badge white_bg orange_br orange" ng-show="order[100] != 0">{{order[100]}}</span></span></div><h5 class="text-center m-0">待收货</h5></a></div><div class="col-xs-3 pr"><a ng-href="/order/list/1" class="text-primary text-333"><div class="text-center"><span class="pr sprite sprite-order_success"><span class="badge white_bg orange_br orange" ng-show="order[1] != 0">{{order[1]}}</span></span></div><h5 class="text-center m-0">已完成</h5></a></div><div class="col-xs-3 pr"><a ng-href="/order/list/0" class="text-primary text-333"><div class="text-center"><span class="pr sprite sprite-order_close"><span class="badge white_bg orange_br orange" ng-show="order[0] != 0">{{order[0]}}</span></span></div><h5 class="text-center m-0">已关闭</h5></a></div></div></div><div class="row block"><div class="col-xs-12"><a ui-sref="page.coupon"><h4 class="text-333 pull-left"><span class="pr sprite sprite-my_info"></span> 我的优惠劵</h4><h5 class="pull-right text-333"><span class="orange">{{valid_coupon_nums||0}}</span>张优惠劵可用<span class="glyphicon glyphicon-chevron-right"></span></h5></a></div></div><div class="row block"><div class="col-xs-12"><h4>账户信息</h4></div><div class="col-xs-12 block-col"><a ng-href="/user/password" class="text-primary"><h5>修改密码</h5></a></div><div class="col-xs-12 block-col"><h5>姓名：{{uinfo.name}}</h5></div><div class="col-xs-12 block-col"><h5>店铺名称：{{uinfo.shop_name}}</h5></div><div class="col-xs-12 block-col"><h5>地址：{{uinfo.address}}</h5></div><div class="col-xs-12 block-col"><h5>电话：{{uinfo.mobile}}</h5></div></div><div class="row block-btn pb-10"><div class="col-xs-12"><a ng-click="logout()" class="btn btn-danger btn-lg btn-block">退出登录</a></div></div></div>'),t.put("app/modules/user/chooseCoupon.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div class="warp-page container-fluid diy_center" ng-show="!showLoading"><div class="row block-col block" ng-show="coupon && coupon.length == 0"><div class="col-xs-12 text-center pt-10 pb-10"><h4>暂时没有符合条件优惠劵</h4></div></div><div class="row mb-10 mt-10" ng-show="coupon && coupon.length != 0"><div class="col-xs-12 mb-10 white_bg" ng-repeat="item in coupon" ng-show="item.status == 1" ng-click="choose_sum(item)"><div class="col-xs-4 text-center sz-24 sprite-green_3_bg sprite_bg white"><span class="zoom2 text-center line-80">￥{{item.detail.minus_amount}}</span></div><div class="col-xs-8 white_bg p-0 pl-10"><p class="mt-10 mb-0" ng-show="item.detail.require_amount > 0">满<span class="green">{{item.detail.require_amount}}</span>元可用<br><span>({{item.detail.description}})</span></p><p class="mt-10 mb-0" ng-show="item.detail.require_amount == 0">{{item.detail.rule_type_cn}}<br><span>({{item.detail.description}})</span><span></span></p><p class="text-gray text-12">有效期{{item.detail.valid_time}}至{{item.detail.invalid_time}}</p></div></div></div></div>'),t.put("app/modules/user/coupon.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div class="warp-page container-fluid diy_center" ng-show="!showLoading"><div class="row block"><div class="col-xs-12"><h4 class="p-0 m-0 line-40 col-xs-6 text-center" ng-class="{green_active: !current}" ng-click="active()">可用({{coupon.ucenterList.active_data.length}})</h4><h4 class="p-0 m-0 line-40 col-xs-6 text-center" ng-class="{green_active: current }" ng-click="no_active()">不可用({{coupon.ucenterList.inactive_data.length}})</h4></div></div><div class="row mb-10" ng-show="!current"><div class="row block-col block" ng-show="coupon.ucenterList.active_data && coupon.ucenterList.active_data.length == 0"><div class="col-xs-12 text-center pt-10 pb-10"><h4>暂时没有符合条件优惠劵</h4></div></div><div class="col-xs-12 mb-10 white_bg" ng-repeat="item in coupon.ucenterList.active_data" ng-show="item.status == 1 || item.status == 2"><div class="col-xs-4 text-center sz-24 sprite-green_3_bg sprite_bg white"><span class="zoom2 text-center line-80">￥{{item.detail.minus_amount}}</span></div><div class="col-xs-8 white_bg p-0 pl-10"><p class="mt-10 mb-0" ng-show="item.detail.require_amount > 0">满<span class="green">{{item.detail.require_amount}}</span>元可用<br><span>({{item.detail.description}})</span></p><p class="mt-10 mb-0" ng-show="item.detail.require_amount == 0">{{item.detail.rule_type_cn}}<br><span>({{item.detail.description}})</span></p><p class="text-gray text-12">有效期{{item.detail.valid_time}}至{{item.detail.invalid_time}}</p><span class="line-80 green coupon_tips" ng-show="item.status == 1">已生效</span> <span class="line-80 orange coupon_tips" ng-show="item.status == 2">未生效</span></div></div></div><!-不可用-!><div class="row mb-10" ng-show="current"><div class="row block-col block" ng-show="coupon.ucenterList.inactive_data && coupon.ucenterList.inactive_data.length == 0"><div class="col-xs-12 text-center pt-10 pb-10"><h4>暂时没有符合条件优惠劵</h4></div></div><div class="col-xs-12 mb-10 white_bg pr" ng-repeat="item in coupon.ucenterList.inactive_data" ng-show="item.status == 3 || item.status == 4"><div class="col-xs-4 text-center sz-24 sprite_bg white" ng-class="{spriteGrayBg: item.status == 4 , spriteYellowBg: item.status == 3 }"><span class="zoom2 text-center line-80">￥{{item.detail.minus_amount}}</span></div><div class="col-xs-8 white_bg p-0 pl-10"><p class="mt-10 mb-0" ng-show="item.detail.require_amount > 0">满<span class="green">{{item.detail.require_amount}}</span>元可用<br><span>({{item.detail.description}})</span></p><p class="mt-10 mb-0" ng-show="item.detail.require_amount == 0">{{item.detail.rule_type_cn}}<br><span>({{item.detail.description}})</span></p><p class="text-gray text-12">有效期{{item.detail.valid_time}}至{{item.detail.invalid_time}}</p><span class="line-80 orange coupon_tips" ng-show="item.status == 4">已过期</span> <span class="line-80 orange coupon_tips" ng-show="item.status == 3">已使用</span></div></div></div></div>'),t.put("app/modules/user/edit.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div class="container-fluid"><form class="row block block-col form-horizontal" role="form" ng-submit="save()" ng-controller="UserEditCtrl"><div class="form-group col-xs-12"><label for="name" class="col-sm-2 control-label"><h5><b>姓名</b></h5></label><div class="col-sm-10"><input type="text" required="" class="input-lg form-control" ng-model="reg.name" name="mobile" id="name" placeholder="请输入您的姓名"></div></div><div class="form-group col-xs-12" ng-if="normalUser"><label for="address" class="col-sm-2 control-label"><h5><b>地理位置</b></h5></label><div class="col-sm-10"><select ng-model="addr.province" class="input-lg form-control" ng-options="m.name for m in provinces" ng-change="get_child(\'citys\', \'province\');get_market(\'province\')" required=""><option value="">选择省份</option></select><select ng-model="addr.city" ng-options="c.name for c in citys" ng-change="get_child(\'countys\', \'city\');get_market(\'city\')" class="block-space input-lg form-control" required=""><option value="">--选择城市--</option></select><select ng-model="addr.county" ng-options="x.name for x in countys" class="block-space input-lg form-control"><option value="">--选择县--</option></select></div></div><div class="form-group col-xs-12" ng-if="normalUser"><label for="market" class="col-sm-2 control-label"><h5><b>市场位置</b></h5></label><div class="col-sm-10"><select required="" ng-model="addr.market" class="form-control input-lg" ng-options="m.name for m in markets"><option value="">选择市场信息</option></select></div></div><div class="form-group col-xs-12" ng-if="normalUser"><label for="detail_address" class="col-sm-2 control-label"><h5><b>详细地址(档口,饭馆名)</b></h5></label><div class="col-sm-10"><input required="" type="text" class="input-lg form-control" ng-model="reg.detailAddress" name="detail_address" id="detail_address" placeholder="请输入详细地址"></div></div><div class="form-group col-xs-12"><div class="col-xs-6"><button type="submit" class="btn col-xs-12 btn-success btn-lg">保存</button></div><div class="col-xs-6"><a ng-click="discard()" class="btn btn-danger btn-lg btn-block">取消</a></div></div></form></div>'),t.put("app/modules/user/login.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h2 class="text-center" style="font-size:14px;">{{items.bodyText}}</h2> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="cancel();" ng-if="items.tel"> <a href="tel:{{items.tel}}"><span class="glyphicon glyphicon-phone-alt m-r-5"></span>{{items.tel}}</a> </button> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-warning" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div class="login_bg container-fluid"><div class="logo"><h3>大果网</h3><h5>DAGUOWANG</h5></div><div class="slogan"><h5>打造农产品一站式采购平台</h5></div><form class="login-form row block block-col form" name="loginForm" role="form" novalidate="" ng-submit="login()"><div class="form-group col-xs-12"><div class="{{error.cls}}" role="alert">{{error.message}}</div></div><div class="form-group col-xs-12"><input type="tel" required="" class="input-md form-control" ng-model="user.mobile" ng-pattern="/^1[3|4|5|6|7|8|9]\\d{9}$/" ng-minlength="11" ng-maxlength="11" name="mobile" id="tel" placeholder="请输入手机号"><div class="col-xs-12 block-col label label-danger" ng-show="(loginForm.submitted || loginForm.mobile.$dirty) && loginForm.mobile.$invalid"><small ng-show="loginForm.mobile.$error.minlength">请输入正确的手机号</small> <small ng-show="!loginForm.mobile.$error.minlength && loginForm.mobile.$error.pattern">手机号格式不正确</small> <small ng-show="loginForm.mobile.$error.required">手机号必填</small></div></div><div class="form-group col-xs-12"><input type="password" required="" class="input-md form-control" ng-minlength="6" ng-model="user.password" name="password" id="password" placeholder="请输入密码"><div class="col-xs-12 block-col label label-danger" ng-show="loginForm.submitted && loginForm.password.$invalid"><small ng-show="loginForm.password.$error.minlength">密码至少6位</small> <small ng-show="loginForm.password.$error.required">密码必填</small></div></div><div class="form-group col-xs-12"><button type="submit" class="btn btn-success btn-md btn-block">登录</button></div><div class="form-group col-xs-12"><a ng-href="#" ng-click="showTips()" class="btn btn-default btn-md btn-block">注册</a></div></form></div>'),t.put("app/modules/user/password.html",'<div class="warp-page container-fluid mb-nav"><form class="row block block-col form-horizontal" role="form" novalidate="" ng-submit="changePassword()" ng-controller="UserPasswordController" name="passwordForm"><div class="form-group col-xs-12 pt-10 ml-0"><label for="password" class="control-label"><h5><b>旧密码</b></h5></label><div class=""><input type="password" required="" class="input-md form-control" ng-model="reg.password" id="password" placeholder="请输入您的旧密码" ng-minlength="6" name="oldpassword"></div></div><div class="form-group col-xs-12 ml-0"><label for="newpassword" class="control-label"><h5><b>新密码</b></h5></label><div class=""><input type="password" required="" class="input-md form-control" ng-model="reg.newPassword" id="newPassword" placeholder="请输入您的新密码" ng-minlength="6" name="password"></div></div><div class="form-group col-xs-12 ml-0"><label for="newpassword" class="control-label"><h5><b>重复输入新密码</b></h5></label><div class=""><input type="password" required="" class="input-md form-control" ng-model="reg.newRePassword" id="newRePassword" ng-minlength="6" placeholder="请再次输入您的新密码" name="repassword"></div></div><div class="form-group alert_box mg col-xs-12 ml-0" ng-show="passwordForm.$invalid && passwordForm.$dirty && show_error"><div class=""><div class="alert alert-danger min_alert" style="margin-bottom: 0px"><ul><li ng-show="passwordForm.oldpassword.$error.minlength">旧密码至少6位</li><li ng-show="passwordForm.oldpassword.$error.required">旧密码必填</li><li ng-show="passwordForm.password.$error.minlength">密码至少6位</li><li ng-show="passwordForm.password.$error.required">密码必填</li><li ng-show="passwordForm.repassword.$error.minlength">确认密码至少6位</li><li ng-show="passwordForm.repassword.$error.required">确认密码必填</li></ul></div></div></div><div class="form-group col-xs-12 ml-0"><div class="row block-btn"><div class="col-xs-12"><button type="submit" class="btn btn-block btn-success orangebtn btn-lg">修改密码</button></div></div></div></form></div>'),t.put("app/modules/user/register.html",'<script type="text/ng-template" id="myModalContent.html"><div class="modal-header"> <h3 class="modal-title">{{items.headerText}}</h3> </div> <div class="modal-body"> <h4>{{items.bodyText}}</h4> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="items.ok();cancel();" ng-if="items.actionText"> {{items.actionText}} </button> <button class="btn btn-alert" ng-click="items.close();cancel()">{{items.closeText}}</button> </div></script><div class="container-fluid"><form name="regForm" class="row block block-col form-horizontal" role="form" novalidate="" ng-submit="register()" ng-controller="UserRegisterCtrl"><div class="form-group col-xs-12"><label for="market" class="col-sm-2 control-label"><h6><b><em class="text-danger">*</em> 您的身份</b></h6></label><div class="col-sm-10"><select required="" ng-model="addr.userType" name="userType" class="form-control input-md" ng-options="m.name for m in types"><option value="">选择身份</option></select><div class="col-xs-12 block-col label label-danger" ng-show="regForm.submitted && regForm.userType.$invalid"><small ng-show="regForm.userType.$error.required">请选择一个注册身份</small></div></div></div><div class="form-group col-xs-12"><label for="tel" class="col-sm-2 control-label"><h6><b><em class="text-danger">*</em> 手机</b></h6></label><div class="col-sm-10"><input type="text" phone-unique="mobile" required="" class="input-md form-control" ng-pattern="/^1[3|5|6|7|8|9]\\d{9}$/" ng-minlength="11" ng-model="reg.mobile" name="mobile" id="tel" placeholder="请输入您的手机号"><div class="col-xs-12 block-col label label-danger" ng-show="(regForm.submitted || regForm.mobile.$dirty) && regForm.mobile.$invalid"><small ng-show="regForm.mobile.$error.minlength">请输入正确的手机号</small> <small ng-show="!regForm.mobile.$error.minlength && regForm.mobile.$error.pattern">您输入的手机号格式不正确</small> <small ng-show="regForm.mobile.$error.required">请输入您的手机号</small> <small ng-if="regForm.mobile.$error.unique">手机号已被注册</small></div></div></div><div class="form-group col-xs-12"><label for="name" class="col-sm-2 control-label"><h6><b><em class="text-danger">*</em> 姓名</b></h6></label><div class="col-sm-10"><input type="text" required="" class="input-md form-control" ng-model="reg.name" name="name" id="name" placeholder="请输入您的真实姓名"><div class="col-xs-12 block-col label label-danger" ng-show="(regForm.submitted || regForm.name.$dirty) && regForm.name.$invalid"><small ng-show="regForm.name.$error.required">请输入您的姓名</small></div></div></div><div class="form-group col-xs-12" ng-if="addr.userType.type == 30"><label for="address" class="col-sm-2 control-label"><h6><b><em class="text-danger">*</em> 您所在的批发市场</b></h6></label><div class="col-sm-10"><select required="" ng-model="addr.city" name="city" ng-options="c.name for c in cities" ng-change="getMarket()" class="block-space form-control input-md"><option value="">选择城市</option></select><div class="col-xs-12 block-col label label-danger" ng-show="(regForm.submitted || regForm.city.$dirty) && regForm.city.$invalid"><small ng-show="regForm.city.$error.required">请选择您所在的城市</small></div></div></div><div class="form-group col-xs-12" ng-if="addr.userType.type == 30"><div class="col-sm-10 col-sm-offset-2"><select required="" ng-model="addr.market" class="form-control input-md" name="market" ng-options="m.name for m in markets"><option value="">选择批发市场</option></select><div class="col-xs-12 block-col label label-danger" ng-show="(regForm.submitted || regForm.market.$dirty) && regForm.market.$invalid"><small ng-show="regForm.market.$error.required">请选择您所在的批发市场</small></div></div></div><div class="form-group col-xs-12" ng-if="addr.userType.type == 30"><label for="detail_address" class="col-sm-2 control-label"><h6><b><em class="text-danger">*</em> 档口位置</b></h6></label><div class="col-sm-10"><input required="" type="text" class="input-md form-control" ng-model="reg.detailAddress" name="detail_address" id="detail_address" placeholder="请描述您在市场里的具体位置"><div class="col-xs-12 block-col label label-danger" ng-show="(regForm.submitted || regForm.detail_address.$dirty) && regForm.detail_address.$invalid"><small ng-show="regForm.detail_address.$error.required">请输入您在市场里的具体位置</small></div></div></div><div class="form-group col-xs-12" ng-if="addr.userType.type == 30"><label for="detail_address" class="col-sm-2 control-label"><h6><b>您的招牌(如 XX果业 )(选填)</b></h6></label><div class="col-sm-10"><input type="text" class="input-md form-control" ng-model="reg.brand" name="brand" id="brand" placeholder="填写您的招牌，树立品牌意识"></div></div><div class="form-group col-xs-12"><label for="password" class="col-sm-2 control-label"><h6><b><em class="text-danger">*</em> 密码</b></h6></label><div class="col-sm-10"><input type="password" required="" class="input-md form-control" ng-model="reg.password" id="password" name="password" placeholder="请输入您的密码"><div class="col-xs-12 block-col label label-danger" ng-show="(regForm.submitted || regForm.password.$dirty) && regForm.password.$invalid"><small ng-show="regForm.password.$error.required">请输入您的密码</small></div></div></div><div class="form-group col-xs-12"><label for="password" class="col-sm-2 control-label"><h6><b><em class="text-danger">*</em> 确认密码</b></h6></label><div class="col-sm-10"><input type="password" required="" class="input-md form-control" ng-model="reg.checkPassword" id="checkPassword" name="repassword" placeholder="请再次输入你的密码"><div class="col-xs-12 block-col label label-danger" ng-show="(regForm.submitted || regForm.repassword.$dirty) && regForm.repassword.$invalid"><small ng-show="regForm.repassword.$error.required">请再次输入您的密码</small></div><div class="col-xs-12 block-col label label-danger" ng-show="(regForm.submitted || regForm.repassword.$dirty) && regForm.repassword.$valid && reg.checkPassword != reg.password"><small>两次密码输入不一致</small></div></div></div><div class="form-group col-xs-12"><label for="password" class="col-sm-2 control-label"><h6><b>请输入推荐人的邀请码(选填)</b></h6></label><div class="col-sm-10"><input type="text" class="input-md form-control" ng-model="reg.invite_code" id="checkPassword" name="invite_code" placeholder="请输入大果网地推人员邀请码"></div></div><div class="form-group col-xs-12"><label for="code" class="col-sm-2 control-label"><h6><b><em class="text-danger">*</em> 验证码</b></h6></label><div class="col-sm-10"><div class="input-group"><input class="input-md form-control" ng-pattern="/^\\d+$/" required="" ng-model="reg.vcode" id="code" type="number" name="code" placeholder="输入短信验证码"><div ng-model="smsinfo" class="input-group-addon btn {{smsdis||smsable}}" ng-disabled="regForm.mobile.$invalid" ng-click="sms()">{{smsinfo || \'获取验证码\'}}</div></div><div class="col-xs-12 block-col label label-danger" ng-show="(regForm.submitted || regForm.code.$dirty) && regForm.code.$invalid"><small ng-show="regForm.code.$error.required">请输入短信验证码</small></div></div></div><div class="checkbox col-xs-12"><div class="row"><div class="col-xs-12"><label class="control-label" ng-init="agree=true"><h6><input type="checkbox" name="agree" id="agree" ng-model="agree"> <a href="/user/agreement">我已阅读并同意用户协议</a></h6></label></div></div></div><div class="col-xs-12 block-btn"><button type="submit" class="btn btn-block btn-success btn-lg" ng-disabled="!agree">注册</button></div></form></div>')
}]);